webpackJsonp([23],{Dmwn:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.add-h4[data-v-13e2d31e]{padding-left:10px;margin-left:20px;border-left:5px solid #007aff\n}\n.avatar-uploader .el-upload[data-v-13e2d31e]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden\n}\n.avatar-uploader .el-upload[data-v-13e2d31e]:hover{border-color:#409EFF\n}\n.avatar-uploader-icon[data-v-13e2d31e]{font-size:28px;color:#8c939d;width:148px;height:148px;line-height:148px;text-align:center;border:1px dashed #c0ccda\n}\n.avatar[data-v-13e2d31e]{width:148px;height:148px;display:block\n}\n.btn-group-box[data-v-13e2d31e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.btn-group-box>div[data-v-13e2d31e]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.all-group[data-v-13e2d31e]{height:42px;line-height:42px;padding-left:20px;border:1px solid #ddd;border-bottom:0\n}\n@media (max-width: 1200px){\n.btn-group-box[data-v-13e2d31e]{margin-top:20px\n}\n}\n.set-pop[data-v-13e2d31e] .el-dialog__body{padding-top:10px\n}\n",""])},EcGx:function(t,e,a){var l=a("Dmwn");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("rjj0")("92643bf6",l,!0)},eUG7:function(t,e,a){"use strict";function l(t){a("EcGx")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("TtmE"),i=a("D7x1"),s=a("5Wmi"),n=a("q+/+"),r={name:"home",data:function(){return{msg:"通道规则",currentPage:1,popVisible:!1,popTitle:"提示",popContent:"这个是内容",total:0,multipleSelection:[],tableData:[],tableLabel:[{label:"id",param:"id",align:"center",sortable:!0,isshow:!1,width:"150"},{slot:"operate2",isshow:!0,label:"图标"},{label:"创建时间",param:"createTime",align:"center",isshow:!0,sortable:!0,width:"160"},{slot:"operate1",isshow:!0,label:"标题"},{label:"用户",param:"userId",align:"center",sortable:!0,isshow:!0,width:"150"},{label:"读取标志",param:"readFlag",align:"center",isshow:!0,sortable:!0,width:"120",render:function(t){return"Y"==t.readFlag?"已读":"N"==t.readFlag?"未读":void 0}},{label:"读取时间",param:"readTime",align:"center",isshow:!0,sortable:!0,width:"160"},{slot:"operate",isshow:!0}],tableOption:[],tableSelect:[],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:"",timeArr:[],isShwoSelect:!0,dataForm:{pageSize:10,pageNum:1},loading:!1,imgurl:"",msgPopVisible:!1,msgDataList:[]}},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}},watch:{appId:function(t,e){this.appId=t}},filters:{formatTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}},created:function(){var t=this;this.imgurl=this.tools.global.API_URL;for(var e=0;e<this.tableLabel.length;e++)this.tableLabel[e].label&&this.tableOption.push(this.tableLabel[e].label),this.tableLabel[e].isshow&&this.tableSelect.push(this.tableLabel[e].label);n.a.$on("showMsgPop",function(e){t.getMagData(e)})},components:{MsgBox:o.a,TableCmp:i.a,ElImageViewer:s.a},mounted:function(){var t=this;this.getTableData(),n.a.$on("msgPageList",function(){"/usermsg"==t.$route.path&&t.getTableData("1")})},methods:{checkboxChange:function(t){for(var e=0;e<this.tableLabel.length;e++)this.tableSelect.indexOf(this.tableLabel[e].label)>-1?this.tableLabel[e].isshow=!0:this.tableLabel[e].isshow=!1},consoleSelect:function(){console.log(this.$refs.tableChild.selectData)},gotoEdit:function(t){alert(t)},open:function(){var t=this,e=setTimeout(function(){t.popVisible=!1,clearTimeout(e)},3e3)},clearSetTimeOut:function(){clearTimeout(this.timer)},getTableData:function(t){var e=this;t||(this.loading=!0),this.utils.http({url:"/public/msg/search",method:"POST",data:this.dataForm},function(t){e.loading=!1,200==t.code&&(e.total=t.data.total,e.tableData=t.data.records)})},allRead:function(){var t=this;this.utils.http({url:"/public/msg/read/all",method:"POST",data:{}},function(e){200==e.code&&(t.getTableData(),n.a.$emit("noReadMsg"))})},deleteMsg:function(t){var e=this,a=[];if(t)a.push(t);else{console.log(this.$refs.tableChild.selectData);this.$refs.tableChild.selectData.forEach(function(t,e){a.push(t.id)}),console.log(a.length)}0==a.length?(this.popVisible=!0,this.popTitle="提示",this.popContent="请先选择要删除的消息",this.open()):this.$confirm("您确信删除选中的消息?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(a),e.utils.http({url:"/public/msg/batchDelete",method:"POST",data:{ids:a}},function(t){200==t.code&&(e.utils.tip("success","删除成功"),e.getTableData())})}).catch(function(){})},getMagData:function(t){n.a.$emit("msgContentPop",t)},handleSizeChange:function(t){this.dataForm.pageSize=t,this.getTableData()},handleCurrentChange:function(t){this.dataForm.pageNum=t,this.getTableData()},goAdd:function(){this.$router.push({path:"/addbill",query:{type:"1"}})}}},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-body"},[a("div",{staticClass:"btn-group-box",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[a("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[a("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:t.allRead}},[a("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),t._v("全部标记为已读\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:function(e){t.deleteMsg("")}}},[a("span",{staticClass:"glyphicon glyphicon-arrow-up",attrs:{"aria-hidden":"true"}}),t._v("批量删除\n            ")])]),t._v(" "),a("div",{staticClass:"pr-0 text-right"},[a("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{on:{change:t.checkboxChange},model:{value:t.tableSelect,callback:function(e){t.tableSelect=e},expression:"tableSelect"}},t._l(t.tableOption,function(t){return a("div",{key:t,staticClass:"checkbox-div"},[a("el-checkbox",{key:t,attrs:{label:t}})],1)}))],1)],1)],1)]),t._v(" "),a("table-cmp",{ref:"tableChild",attrs:{"table-data":t.tableData,"table-label":t.tableLabel,"is-show-select":t.isShwoSelect}},[a("el-table-column",{attrs:{slot:"operate2",label:"图标",align:"center","min-width":"60"},slot:"operate2",scopedSlots:t._u([{key:"default",fn:function(t){return[a("span",{class:t.row.iconStyle})]}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate1",label:"标题",align:"center","min-width":"250"},slot:"operate1",scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?a("a",{staticStyle:{color:"#007aff"},attrs:{href:e.row.url}},[t._v(t._s(e.row.title))]):a("a",{staticStyle:{color:"rgb(18, 17, 29)"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"150"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{title:"日志",type:"primary",icon:"el-icon-tickets",round:"",size:"mini"},on:{click:function(a){t.getMagData(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{title:"删除",type:"danger",icon:"el-icon-delete",round:"",size:"mini"},on:{click:function(a){t.deleteMsg(e.row.id)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])]),t._v(" "),a("msg-box",{attrs:{popVisible:t.popVisible,popTitle:t.popTitle,popContent:t.popContent},on:{"update:popVisible":function(e){t.popVisible=e}}}),t._v(" "),a("el-dialog",{staticClass:"el-dialog-reset set-pop msg-content",attrs:{title:"消息详情",visible:t.msgPopVisible,width:"60%"},on:{"update:visible":function(e){t.msgPopVisible=e}}},[a("div",{staticStyle:{padding:"0 10px"}},[a("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:t.msgDataList,border:!0,"cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0,"max-height":"400"}},[a("el-table-column",{attrs:{prop:"level",label:"级别",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return["E"==e.row.level?a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.row.level))]):a("span",[t._v(t._s(e.row.level))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"timestamp",label:"时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return["E"==e.row.level?a("span",{staticStyle:{color:"red"}},[t._v(t._s(t._f("formatTime")(e.row.timestamp)))]):a("span",[t._v(t._s(t._f("formatTime")(e.row.timestamp)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(e){return["E"==e.row.level?a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.row.content))]):a("span",[t._v(t._s(e.row.content))])]}}])})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.msgPopVisible=!1}}},[t._v("关闭")])],1)])],1)},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      系统管理 - 用户消息\n      ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"fa fa-home"}),t._v(" 首页\n        ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-dashboard"}),t._v(" 系统管理\n      ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 用户消息\n      ")])])])}],p={render:c,staticRenderFns:d},u=p,b=a("VU/8"),h=l,g=b(r,u,!1,h,"data-v-13e2d31e",null);e.default=g.exports}});