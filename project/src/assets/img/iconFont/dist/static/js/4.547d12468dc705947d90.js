webpackJsonp([4],{TVSE:function(t,e,a){"use strict";function i(t){a("m1mD")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),l=a.n(o),s=a("TtmE"),n=a("D7x1"),r={name:"home",data:function(){return{msg:"通道规则",currentPage:1,currentPage1:1,currentPage2:1,popVisible:!1,popTitle:"这个是标题",dialogTitleName:"",popContent:"",total:0,multipleSelection:[],tableData:[],tableLabel:[{label:"ID",param:"id",align:"center",sortable:!0,isshow:!1,width:"120"},{label:"名称",param:"name",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"S/N",param:"serial",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"进出方向",param:"inoutFlag",align:"center",width:"120",sortable:!0,isshow:!0,render:function(t){return 0==t.inoutFlag?"出口":1==t.inoutFlag?"入口":2==t.inoutFlag?"出入口":void 0}},{label:"所在位置",param:"groupName",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"型号",param:"model",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"状态",slot:"operate1",isshow:!0},{label:"设备参数",slot:"operate3",isshow:!0},{label:"授权人员",slot:"operate2",isshow:!0},{slot:"operate",isshow:!0}],tableOption:[],tableSelect:[],inoutFlagOption:[{value:0,label:"出口"},{value:1,label:"入口"},{value:2,label:"出入口"}],networkStatus:[{value:0,label:"离线"},{value:1,label:"在线"}],value:"",addPopVisible:!1,rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],groupId:[{required:!0,message:"请选择所在位置",trigger:"change"}],inoutFlag:[{required:!0,message:"请选择进出标识",trigger:"change"}],serial:[{required:!0,message:"请输入设备SN号",trigger:"blur"}]},projectName:"",addForm:{appId:"",groupId:"",name:"",inoutFlag:"",serial:""},cascaderData:[],groupProps:{children:"groups",label:"name",value:"id",checkStrictly:!0,expandTrigger:"hover"},isShowSelect:!0,dataForm:{appId:"",name:"",online:"",pageSize:10,page:1,inoutFlag:""},loading:!1,monitorPopVisible:!1,video:null,canvas:null,ctx:null,width:null,height:null,url:"",isRequst:!1,paramsSet:[],paramsSetVisible:!1,currentDeviceId:"",activeName:"",setIndex:0,currentTab:{item:[]},allCurrentTab:[],isShowTip:!1,dialogVisible:!1,authTotal:0,authData:[],authForm:{appId:"",deviceId:"",page:1,pageSize:10,name:""},isShowSaveBtn:!1,isShowResetBtn:!1,imgurl:"",cascaderKey:1,videoReader:new FileReader,ws:{},playStreamWsAddress:"",playStreamWssAddress:"",playStreamId:"",playStreamOnline:"1",countDown:60,countDownTimer:null,isshowIdCard:!1,isshowCard:!1,updateVersionPop:!1,timer:null,softData:[{name:"1",type:2,version:"1.23.7",remark:"机构：深圳市芊熠智能硬件有限公司，用户：znxfire",createTime:1598251045e3,updateTime:1598251045e3},{name:"2",type:2,version:"1.23.7",remark:"机构：深圳市芊熠智能硬件有限公司，用户：znxfire",createTime:1598251045e3,updateTime:1598251045e3}],deviceTotal:0,softForm:{appId:"",pageNum:1,pageSize:10,search:""},softRadio:-1,upDeviceId:[],upSoftId:"",upFailedPop:!1,FailedList:[],isUping:!1}},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}},appName:{get:function(){return this.$store.state.project.projectName},set:function(t){this.$store.commit("changeProjectName",t)}}},watch:{appId:function(t,e){this.appId=t,++this.cascaderKey,this.dataForm={appId:t,name:"",online:"",pageSize:10,page:1,inoutFlag:""},this.authForm={appId:t,deviceId:"",page:1,pageSize:10,name:""},this.softForm={appId:t,pageNum:1,pageSize:10,softForm:""},this.addForm.appId=t,this.getLeftData(),this.getDataTable()},appName:function(t){this.projectName=t}},filters:{},created:function(){this.imgurl=this.tools.global.API_URL;for(var t=0;t<this.tableLabel.length;t++)this.tableLabel[t].label&&this.tableOption.push(this.tableLabel[t].label),this.tableLabel[t].isshow&&this.tableSelect.push(this.tableLabel[t].label)},components:{MsgBox:s.a,TableCmp:n.a},mounted:function(){this.appId&&(this.projectName=this.$store.state.project.projectName,this.addForm.appId=this.appId,this.dataForm.appId=this.appId,this.authForm.appId=this.appId,this.softForm.appId=this.appId,this.getLeftData(),this.getDataTable())},methods:{elCascaderOnlick:function(){var t=this;setTimeout(function(){document.querySelectorAll(".el-cascader-node__label").forEach(function(e){e.onclick=function(){this.previousElementSibling.click(),t.$refs.elcascader.dropDownVisible=!1}}),document.querySelectorAll(".el-cascader-panel .el-radio").forEach(function(e){e.onclick=function(){t.$refs.elcascader.dropDownVisible=!1}})},100)},getVideoWebsocket:function(t,e){var a=this;this.playStreamId=t,this.playStreamOnline=e,this.utils.http({url:"/device/getDeviceMediaStream",method:"GET",params:{appId:this.appId,deviceId:t}},function(t){200==t.code&&(a.monitorPopVisible=!0,a.playStreamWsAddress=t.data.playStreamWsAddress,a.playStreamWssAddress=t.data.playStreamWssAddress,a.initWebSocket())})},initWebSocket:function(){var t=this;window.WebSocket||(window.WebSocket=window.MozWebSocket),this.videoReader.onload=function(e){e.target.readyState==FileReader.DONE&&(t.url=this.result)};var e=window.location.protocol;window.WebSocket?(this.ws="https:"==e?new WebSocket(this.playStreamWssAddress):new WebSocket(this.playStreamWsAddress),this.ws.onopen=this.sendData,this.ws.onmessage=this.webSocketMessage,this.ws.onclose=this.websocketClose,this.ws.onerror=this.websocketError):console.log("你的浏览器不支持 WebSocket！")},sendData:function(t){console.log("监控建立时间:",(new Date).toLocaleString("zh")),this.timerCount()},webSocketMessage:function(t){try{this.videoReader.readAsDataURL(t.data)}catch(t){console.log(t)}},websocketClose:function(t){},websocketError:function(t){console.log("监控连接失败")},monitorClose:function(){this.websocketClose(),this.ws.close(),this.monitorPopVisible=!1,this.url="",this.countDownTimer&&clearInterval(this.countDownTimer),this.countDown=60},playStreamOpen:function(){this.openDoorRequst(this.playStreamId,this.playStreamOnline)},CatchPictures:function(){var t=document.createElement("a");t.href="data:image/png;base64,"+this.url.split(",")[1],t.download="photograph",t.click()},timerCount:function(){var t=this;this.countDownTimer=setInterval(function(){0==t.countDown?(clearInterval(t.countDownTimer),t.countDown=60,t.monitorClose()):t.countDown--},1e3)},checkboxChange:function(t){for(var e=0;e<this.tableLabel.length;e++)this.tableSelect.indexOf(this.tableLabel[e].label)>-1?this.tableLabel[e].isshow=!0:this.tableLabel[e].isshow=!1},open:function(){var t=this;this.timer=setTimeout(function(){t.popVisible=!1,clearTimeout(t.timer)},3e3)},clearSetTimeOut:function(){clearTimeout(this.timer)},getDataTable:function(){var t=this;this.loading=!0,this.utils.http({url:"/device/page",method:"POST",data:this.dataForm},function(e){t.loading=!1,200==e.code&&(t.total=e.data.total,t.tableData=e.data.records,t.currentPage=e.data.current)})},addDevice:function(t){var e,a=this;e=this.isAdd?"/device/faceBinding":"/device/update",this.$refs[t].validate(function(t){t&&(a.isRequst=!0,a.utils.http({url:e,method:"POST",isAdd:!0,data:a.addForm},function(t){a.isRequst=!1,200==t.code&&(a.addPopVisible=!1,a.getDataTable(),a.addForm={appId:a.appId,groupId:"",name:"",inoutFlag:"",serial:""})}))})},cascaderChange:function(t){t&&(this.addForm.groupId=t[t.length-1])},closePop:function(){var t=this;this.$nextTick(function(){t.$refs.addForm.clearValidate()}),this.addForm={appId:this.appId,groupId:"",name:"",inoutFlag:"",serial:""}},clickAdd:function(){this.addPopVisible=!0,this.isAdd=!0,this.dialogTitleName="添加设备"},editDevice:function(t,e){var a=this;this.isAdd=!1,this.dialogTitleName="编辑设备",this.utils.http({url:"/device/updateInfo?id="+t,method:"GET",params:{}},function(t){200==t.code&&(a.addForm=t.data,a.addForm.appId=a.appId,a.addPopVisible=!0)})},getLeftData:function(){var t=this;this.cascaderData=[],this.utils.http({url:"/base/house/list",method:"GET",params:{appId:this.appId}},function(e){200==e.code&&e.data&&(t.cascaderData.push(e.data),t.cascaderData.forEach(function(t,e){t.groups.forEach(function(t,e){t.groups.forEach(function(t,e){t.groups=null})})}))})},openDoorRequst:function(t,e){var a=this;0==e?this.utils.tip("warning","设备不在线"):this.utils.http({url:"/device/openTheDoor",method:"POST",data:{id:t}},function(t){200==t.code&&a.utils.tip("success","开门指令发送成功")})},reAuth:function(t,e){var a=this;0==e?this.utils.tip("warning","设备不在线"):this.$confirm("您确信重新授权设备?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.utils.http({url:"/device/reload",method:"POST",data:{id:t}},function(t){200==t.code&&a.utils.tip("success","重新授权成功")})}).catch(function(){})},deleteDevice:function(t){var e=this;this.$confirm("您确信删除选中的设备?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.utils.http({url:"/device/delete",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e.utils.changeJson({deviceId:t})},function(t){200==t.code&&(e.utils.tip("success","删除成功"),e.getDataTable())})}).catch(function(){})},resetBtn:function(){this.dataForm={appId:this.appId,name:"",online:"",pageSize:10,page:1,type:""},this.getDataTable()},handleSizeChange:function(t){this.dataForm.pageSize=t,this.getDataTable()},handleCurrentChange:function(t){this.dataForm.page=t,this.getDataTable()},seeAuthPeople:function(t){var e=this;t&&(this.authForm.deviceId=t),this.utils.http({url:"/device/personPage",method:"POST",data:this.authForm},function(t){200==t.code&&(e.authTotal=t.data.total,e.authData=t.data.records,e.currentPage1=t.data.current,e.dialogVisible=!0)})},handleSizeChange1:function(t){this.authForm.pageSize=t,this.seeAuthPeople()},handleCurrentChange1:function(t){this.authForm.page=t,this.seeAuthPeople()},getDeviceData:function(t){var e=this;this.setIndex=0,this.currentDeviceId=t,this.utils.http({url:"/device/deviceConfigInit",method:"GET",params:{id:t}},function(t){200==t.code&&(e.paramsSet=JSON.parse(t.data),e.currentTab=JSON.parse(t.data)[0],e.paramsSetVisible=!0,console.log(e.paramsSet))})},updataDeviceData:function(){var t=this;this.utils.http({url:"/device/getDeviceConfig",method:"POST",data:{id:this.currentDeviceId}},function(e){200==e.code&&(t.setIndex=0,t.paramsSet=JSON.parse(e.data),t.currentTab=JSON.parse(e.data)[0])})},resetData:function(){this.currentTab.item.forEach(function(t,e){t.defaultValue&&(t.value=t.defaultValue)})},tabClick:function(t,e){var a=this;this.isShowSaveBtn=!1,this.isShowResetBtn=!1,this.setIndex=t,this.currentTab=e,e.item.forEach(function(t,i){"OpenDoor"==t.key&&1==t.value?e.item.forEach(function(t,e){"IdCardVerify"==t.key||"SwipeIdCardTip"==t.key?t.ishow=!1:t.ishow=!0}):"OpenDoor"==t.key&&3==t.value?e.item.forEach(function(t,e){"CardVerify"==t.key||"SwipeCardTip"==t.key?t.ishow=!1:t.ishow=!0}):"OpenDoor"==t.key&&e.item.forEach(function(t,e){"CardVerify"==t.key||"SwipeCardTip"==t.key||"IdCardVerify"==t.key||"SwipeIdCardTip"==t.key||"SwipeFaceTip"==t.key?t.ishow=!1:t.ishow=!0}),0==t.readonly&&(a.isShowSaveBtn=!0),t.defaultValue&&(a.isShowResetBtn=!0)}),this.currentTab=e},editDeviceData:function(){var t=this,e=this.currentTab,a={},i=e.groupKey,o={};e.item.forEach(function(t,e){if(!t.maxValue&&!t.minValue||t.value||0==t.value){"boolean"==t.type&&("1"==t.value?t.value=!0:"0"==t.value&&(t.value=!1));var a=t.key,i=t.value;o[a]=i}}),a[i]=o,this.utils.http({url:"/device/setDeviceConfig",method:"POST",data:{data:a,id:this.currentDeviceId}},function(e){200==e.code&&t.utils.tip("success","修改成功")})},openDoorChange:function(t){if(1==t){var e=JSON.parse(l()(this.currentTab));e.item.forEach(function(t,e){"IdCardVerify"==t.key||"SwipeIdCardTip"==t.key?t.ishow=!1:t.ishow=!0}),this.currentTab=e}else if(3==t){var e=JSON.parse(l()(this.currentTab));e.item.forEach(function(t,e){"CardVerify"==t.key||"SwipeCardTip"==t.key?t.ishow=!1:t.ishow=!0}),this.currentTab=e}else{var a=JSON.parse(l()(this.currentTab));a.item.forEach(function(t,e){"CardVerify"==t.key||"SwipeCardTip"==t.key||"IdCardVerify"==t.key||"SwipeIdCardTip"==t.key||"SwipeFaceTip"==t.key?t.ishow=!1:t.ishow=!0}),this.currentTab=a}},updateVer:function(){var t=[];this.$refs.tableChild.selectData.forEach(function(e,a){t.push(e.id)}),this.upDeviceId=t,0==t.length?(this.popVisible=!0,this.popTitle="提示",this.popContent="请至少选择一个升级设备",this.open()):(this.softForm.search="",this.softForm.pageNum=1,this.softForm.pageSize=10,this.getSoftData())},getSoftData:function(){var t=this;this.utils.http({url:"/device/serach",method:"POST",data:this.softForm},function(e){200==e.code&&(t.softData=e.data.records,t.deviceTotal=e.data.total,t.currentPage2=e.data.current,t.updateVersionPop=!0)})},handleSizeChange2:function(t){this.softForm.pageSize=t,this.getSoftData()},handleCurrentChange2:function(t){this.softForm.pageNum=t,this.getSoftData()},getCurrentRow:function(t,e){this.upSoftId=e,this.softRadio=t},saveVerson:function(){var t=this;this.upSoftId?(this.isUping=!0,this.utils.http({url:"/device/upgrade",method:"POST",data:{deviceIds:this.upDeviceId,softId:this.upSoftId}},function(e){t.isUping=!1,200==e.code&&(1==e.data.isOpen?(t.FailedList=e.data.list,t.upFailedPop=!0):t.utils.tip("success","设备升级指令全部下发成功"))})):(this.popVisible=!0,this.popTitle="提示",this.popContent="请选择设备升级版本!",this.open())},restartDevice:function(t,e){var a=this;0==e?this.utils.tip("warning","设备不在线"):this.$confirm("您确信重启设备?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.utils.http({url:"/device/restart",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a.utils.changeJson({deviceId:t})},function(t){200==t.code&&a.utils.tip("success","重启成功")})}).catch(function(){})}}},c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),i("section",{staticClass:"content container-fluid"},[i("div",{staticClass:"box box-primary"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-body"},[i("div",{staticClass:"form-horizontal"},[i("div",{staticClass:"col-lg-2 pl-0"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"搜索设备名称"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1)])]),t._v(" "),i("div",{staticClass:"col-lg-2"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-select",{attrs:{placeholder:"类型",clearable:""},model:{value:t.dataForm.inoutFlag,callback:function(e){t.$set(t.dataForm,"inoutFlag",e)},expression:"dataForm.inoutFlag"}},t._l(t.inoutFlagOption,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),i("div",{staticClass:"col-lg-2"},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-md-12"},[i("el-select",{attrs:{clearable:"",placeholder:"网络状态"},model:{value:t.dataForm.online,callback:function(e){t.$set(t.dataForm,"online",e)},expression:"dataForm.online"}},t._l(t.networkStatus,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),i("div",{staticClass:"col-lg-4 pr-0"},[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getDataTable}},[i("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                          ")]),t._v(" "),i("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:t.resetBtn}},[i("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v("重置\n                          ")])])])]),t._v(" "),i("div",{staticClass:" btn-group-box",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[i("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[i("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:t.clickAdd}},[i("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),t._v("新增\n                        ")]),t._v(" "),i("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:t.updateVer}},[i("span",{staticClass:"glyphicon glyphicon-open",attrs:{"aria-hidden":"true"}}),t._v("设备升级\n                        ")])]),t._v(" "),i("div",{staticClass:" pr-0 text-right"},[i("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"el-icon-menu"}),t._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-checkbox-group",{on:{change:t.checkboxChange},model:{value:t.tableSelect,callback:function(e){t.tableSelect=e},expression:"tableSelect"}},t._l(t.tableOption,function(t){return i("div",{key:t,staticClass:"checkbox-div"},[i("el-checkbox",{key:t,attrs:{label:t}})],1)}))],1)],1)],1)]),t._v(" "),i("table-cmp",{ref:"tableChild",attrs:{"table-data":t.tableData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}},[i("el-table-column",{attrs:{slot:"operate1",label:"状态",align:"center","min-width":"80px",sortable:""},slot:"operate1",scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.online?i("img",{staticClass:"image",attrs:{alt:"离线",title:"设备离线",width:"24",height:"24",src:a("qhPP")}}):t._e(),t._v(" "),1==e.row.online?i("img",{staticClass:"image",attrs:{alt:"在线",title:"设备在线",width:"24",height:"24",src:a("lPfY")}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{slot:"operate2",label:"授权人员",align:"center","min-width":"120px",sortable:""},slot:"operate2",scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"fa fa-key",staticStyle:{cursor:"pointer"},on:{click:function(a){t.seeAuthPeople(e.row.id)}}})]}}])}),t._v(" "),i("el-table-column",{attrs:{slot:"operate3",label:"设备参数",align:"center","min-width":"120px",sortable:""},slot:"operate3",scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"fa fa-cogs",staticStyle:{cursor:"pointer"},on:{click:function(a){t.getDeviceData(e.row.id)}}})]}}])}),t._v(" "),i("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"360"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-row",[i("el-button",{attrs:{title:"编辑",type:"primary",icon:"el-icon-edit",round:"",size:"mini"},on:{click:function(a){t.editDevice(e.row.id,e.row.online)}}}),t._v(" "),i("el-button",{attrs:{title:"监控",type:"primary",icon:"el-icon-view",round:"",size:"mini"},on:{click:function(a){t.getVideoWebsocket(e.row.id,e.row.online)}}}),t._v(" "),i("el-button",{attrs:{title:"重启",type:"primary",icon:"el-icon-switch-button",round:"",size:"mini"},on:{click:function(a){t.restartDevice(e.row.id,e.row.online)}}}),t._v(" "),i("el-button",{attrs:{title:"重新授权",type:"primary",icon:"el-icon-refresh",round:"",size:"mini"},on:{click:function(a){t.reAuth(e.row.id,e.row.online)}}}),t._v(" "),i("el-button",{attrs:{title:"开门",type:"primary",icon:"el-icon-key",round:"",size:"mini"},on:{click:function(a){t.openDoorRequst(e.row.id,e.row.online)}}}),t._v(" "),i("el-button",{attrs:{title:"删除",type:"danger",icon:"el-icon-delete",round:"",size:"mini"},on:{click:function(a){t.deleteDevice(e.row.id)}}})],1)]}}])})],1),t._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])]),t._v(" "),i("el-dialog",{staticClass:"el-dialog-reset set-pop",attrs:{title:t.dialogTitleName,visible:t.addPopVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(e){t.addPopVisible=e},close:t.closePop}},[i("div",{staticStyle:{padding:"0px"}},[i("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:t.addForm,rules:t.rules}},[i("div",{staticClass:"row"},[i("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[i("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                项目名称\n              ")]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("el-form-item",[i("el-input",{staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1)],1)]),t._v(" "),i("div",{staticClass:"row"},[i("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[i("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                设备名称\n              ")]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("el-form-item",{attrs:{prop:"name"}},[i("el-input",{staticStyle:{width:"100%"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1)]),t._v(" "),i("div",{staticClass:"row"},[i("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[i("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                设备SN号\n              ")]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("el-form-item",{attrs:{prop:"serial"}},[i("el-input",{staticStyle:{width:"100%"},model:{value:t.addForm.serial,callback:function(e){t.$set(t.addForm,"serial",e)},expression:"addForm.serial"}})],1)],1)]),t._v(" "),i("div",{staticClass:"row"},[i("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[i("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                所在位置\n              ")]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("el-form-item",{attrs:{prop:"groupId"}},[i("el-cascader",{key:t.cascaderKey,ref:"elcascader",staticStyle:{width:"100%"},attrs:{placeholder:"楼栋/单元/房间",options:t.cascaderData,props:t.groupProps},on:{"visible-change":t.elCascaderOnlick,"expand-change":t.elCascaderOnlick,change:t.cascaderChange},model:{value:t.addForm.groupId,callback:function(e){t.$set(t.addForm,"groupId",e)},expression:"addForm.groupId"}})],1)],1)]),t._v(" "),i("div",{staticClass:"row"},[i("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[i("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                进出标识\n              ")]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("el-form-item",{attrs:{prop:"inoutFlag"}},[i("el-select",{staticStyle:{},attrs:{placeholder:""},model:{value:t.addForm.inoutFlag,callback:function(e){t.$set(t.addForm,"inoutFlag",e)},expression:"addForm.inoutFlag"}},t._l(t.inoutFlagOption,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)])])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addPopVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isRequst?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDevice("addForm")}}},[t._v("确 定")]),t._v(" "),t.isRequst?i("el-button",{attrs:{type:"primary"}},[t._v("提交中")]):t._e()],1)]),t._v(" "),i("el-dialog",{staticClass:"el-dialog-reset data-set-pop",attrs:{title:"参数设置",visible:t.paramsSetVisible,width:"800px"},on:{"update:visible":function(e){t.paramsSetVisible=e}}},[i("div",{staticStyle:{padding:"0px"}},[i("ul",{staticClass:"set-list"},t._l(t.paramsSet,function(e,a){return i("li",{key:a,class:{active:t.setIndex==a},on:{click:function(i){t.tabClick(a,e)}}},[t._v(t._s(e.groupName))])})),t._v(" "),i("el-form",{ref:"currentTab",staticClass:"demo-dynamic",staticStyle:{"min-height":"300px","max-height":"470px","overflow-y":"auto"},attrs:{model:t.currentTab,"label-width":"150px"}},[t._l(t.currentTab.item,function(e,a){return"OpenDoorModeSet"!=t.currentTab.groupKey?i("el-form-item",{key:a,attrs:{label:e.name}},["string"==e.type&&"currenttime"==e.key?i("el-date-picker",{attrs:{clearable:!1,disabled:1==e.readonly,small:"small",align:"right",type:"date",format:"yyyy-MM-dd hh:mm:ss","value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}}):"string"==e.type&&"time"==e.key?i("el-time-picker",{attrs:{disabled:1==e.readonly,clearable:!1,format:"hh:mm:ss","value-format":"hh:mm:ss"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}}):"level"==e.key?i("el-slider",{staticStyle:{width:"400px"},attrs:{disabled:1==e.readonly,max:e.maxValue},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}}):e.maxValue||e.minValue?i("el-input",{attrs:{disabled:1==e.readonly,maxlength:e.maxLength,max:e.maxValue,min:e.minValue},on:{input:function(t){e.value>e.maxValue&&(e.value=e.maxValue),e.value<e.minValue&&(e.value=e.minValue)}},model:{value:e.value,callback:function(a){t.$set(e,"value",t._n(a))},expression:"i.value"}}):"string"==e.type||"integer"==e.type?i("el-input",{attrs:{disabled:1==e.readonly,maxlength:e.maxLength},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}}):"boolean"==e.type?i("el-checkbox",{attrs:{disabled:1==e.readonly||1==e.readonly,checked:1==e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}}):(e.type="enum")?i("el-select",{attrs:{placeholder:"请选择",disabled:1==e.readonly},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}},t._l(e.optionName,function(t,a){return i("el-option",{key:t,attrs:{label:t,value:e.optionValue[a]}})})):t._e(),t._v(" "),!e.maxValue&&!e.minValue||e.value||0==e.value?t._e():i("span",{staticClass:"tip",staticStyle:{color:"red"}},[t._v("内容不能为空")])],1):t._e()}),t._v(" "),t._l(t.currentTab.item,function(e,a){return"OpenDoorModeSet"==t.currentTab.groupKey&&e.ishow?i("el-form-item",{key:a,attrs:{label:e.name}},["enum"==e.type&&"OpenDoor"==e.key?i("el-select",{attrs:{placeholder:"请选择",disabled:1==e.readonly},on:{change:t.openDoorChange},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}},t._l(e.optionName,function(t,a){return i("el-option",{key:t,attrs:{label:t,value:e.optionValue[a]}})})):"enum"==e.type&&e.ishow?i("el-select",{attrs:{placeholder:"请选择",disabled:1==e.readonly},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}},t._l(e.optionName,function(t,a){return i("el-option",{key:t,attrs:{label:t,value:e.optionValue[a]}})})):"boolean"==e.type&&e.ishow?i("el-checkbox",{attrs:{disabled:1==e.readonly||1==e.readonly,checked:1==e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"i.value"}}):t._e()],1):t._e()}),t._v(" "),i("el-form-item",[t.isShowResetBtn?i("el-button",{attrs:{type:"primary"},on:{click:t.resetData}},[t._v("恢复默认值")]):t._e(),t._v(" "),t.isShowSaveBtn?i("el-button",{attrs:{type:"primary"},on:{click:t.editDeviceData}},[t._v("保存")]):t._e()],1)],2)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.paramsSetVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.updataDeviceData}},[t._v("刷新")])],1)]),t._v(" "),i("el-dialog",{staticClass:"el-dialog-reset auth-pop",attrs:{title:"授权人员",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticStyle:{padding:"0px"}},[i("div",{staticClass:"text-right mb-20"},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入名称",clearable:"",size:"small"},model:{value:t.authForm.name,callback:function(e){t.$set(t.authForm,"name",e)},expression:"authForm.name"}}),t._v(" "),i("el-button",{staticClass:"mr-10",attrs:{type:"primary",size:"small"},on:{click:function(e){t.seeAuthPeople("")}}},[t._v("搜索")])],1),t._v(" "),i("el-table",{attrs:{data:t.authData,border:!0,"max-height":"250","cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0}},[i("el-table-column",{attrs:{property:"url",label:"人脸","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?i("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.imgurl+"/file/download?path="+e.row.url,alt:""}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"personName",label:"名称","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{property:"phone",label:"联系方式","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{property:"personSubtype",label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.personSubtype?i("span",[t._v("住户")]):2==e.row.personSubtype?i("span",[t._v("住户")]):3==e.row.personSubtype?i("span",[t._v("住户")]):4==e.row.personSubtype?i("span",[t._v("物业员工")]):5==e.row.personSubtype?i("span",[t._v("其他")]):6==e.row.personSubtype?i("span",[t._v("访客")]):t._e()]}}])})],1)],1),t._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.authTotal},on:{"size-change":t.handleSizeChange1,"current-change":t.handleCurrentChange1}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)]),t._v(" "),i("el-dialog",{staticClass:"el-dialog-reset auth-pop",attrs:{title:"选择升级版本",visible:t.updateVersionPop,width:"1160px"},on:{"update:visible":function(e){t.updateVersionPop=e}}},[i("div",{staticStyle:{padding:"0px"}},[i("div",{staticClass:"text-right mb-20"},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入名称或版本号查询",clearable:"",size:"small"},model:{value:t.softForm.search,callback:function(e){t.$set(t.softForm,"search",e)},expression:"softForm.search"}}),t._v(" "),i("el-button",{staticClass:"mr-10",attrs:{type:"primary",size:"small"},on:{click:function(e){t.getSoftData()}}},[t._v("搜索")])],1),t._v(" "),i("el-table",{attrs:{data:t.softData,border:!0,"max-height":"250","cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0}},[i("el-table-column",{attrs:{label:"",width:"50",center:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-radio",{staticClass:"radio",attrs:{label:e.$index},nativeOn:{change:function(a){t.getCurrentRow(e.$index,e.row.id)}},model:{value:t.softRadio,callback:function(e){t.softRadio=e},expression:"softRadio"}},[t._v(" \n　　　　　　　　")])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"name",label:"软件名称","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{property:"type",label:"软件类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("span",[t._v("未知")]):2==e.row.type?i("span",[t._v("人脸门禁终端")]):3==e.row.type?i("span",[t._v("人证核验终端")]):5==e.row.type?i("span",[t._v("安卓")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"version",label:"软件版本",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{property:"remark",label:"备注信息","min-width":"300"}}),t._v(" "),i("el-table-column",{attrs:{property:"createTime",label:"发布时间",width:"160"}}),t._v(" "),i("el-table-column",{attrs:{property:"updateTime",label:"上传时间",width:"160"}})],1)],1),t._v(" "),i("div",{staticClass:"block mt-10"},[i("el-pagination",{attrs:{"current-page":t.currentPage2,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.deviceTotal},on:{"size-change":t.handleSizeChange2,"current-change":t.handleCurrentChange2}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.updateVersionPop=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isUping,expression:"!isUping"}],attrs:{type:"primary"},on:{click:t.saveVerson}},[t._v("确 定")]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isUping,expression:"isUping"}],attrs:{type:"primary"}},[t._v("升级中")])],1)]),t._v(" "),i("el-dialog",{staticClass:"el-dialog-reset auth-pop",attrs:{title:"提示",visible:t.upFailedPop,width:"550px"},on:{"update:visible":function(e){t.upFailedPop=e}}},[i("ul",{staticStyle:{"max-height":"150px"}},t._l(t.FailedList,function(e,a){return i("li",{key:a,staticStyle:{"margin-bottom":"6px"}},[t._v("设备："+t._s(e.deviceName)+"，升级指令下发失败！ 原因："+t._s(e.reMess))])})),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.upFailedPop=!1,t.updateVersionPop=!1}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{staticClass:"el-dialog-reset set-pop video-pop",attrs:{title:"门前监视",visible:t.monitorPopVisible,width:"500px"},on:{"update:visible":function(e){t.monitorPopVisible=e},close:t.monitorClose}},[i("div",{staticStyle:{padding:"0px","vertical-align":"middle","text-align":"center"}},[i("img",{staticStyle:{height:"500px",width:"auto"},attrs:{src:t.url,alt:""}})]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.playStreamOpen}},[t._v("开门")]),t._v(" "),i("el-button",{on:{click:t.CatchPictures}},[t._v("拍照")])],1)]),t._v(" "),i("msg-box",{attrs:{popVisible:t.popVisible,popTitle:t.popTitle,popContent:t.popContent},on:{"update:popVisible":function(e){t.popVisible=e}}})],1)},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n        设备管理 - 通道门禁\n          ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n            ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-hdd"}),t._v(" 设备管理\n          ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 通道门禁\n          ")])])])}],p={render:c,staticRenderFns:d},u=p,h=a("VU/8"),m=i,v=h(r,u,!1,m,"data-v-31b537a4",null);e.default=v.exports},lPfY:function(t,e,a){t.exports=a.p+"static/img/online.c2e0648.png"},m1mD:function(t,e,a){var i=a("pqit");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("039d7722",i,!0)},pqit:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.set-pop[data-v-31b537a4] .el-range-editor.el-input__inner{width:50%\n}\n.set-pop[data-v-31b537a4] .el-input,.set-pop[data-v-31b537a4] .el-select{width:100%\n}\n.set-pop[data-v-31b537a4] .el-select>.el-input{width:100%\n}\n.set-pop[data-v-31b537a4] .el-dialog__footer{text-align:center\n}\n#canvas[data-v-31b537a4]{width:400px;height:200px;position:relative;z-index:999999\n}\n.set-list[data-v-31b537a4]{overflow:hidden\n}\n.set-list li[data-v-31b537a4]{float:left;margin-right:25px;line-height:40px;border-bottom:3px solid transparent;cursor:pointer\n}\n.set-list li.active[data-v-31b537a4]{border-bottom:3px solid #3c8dbc\n}\n.data-set-pop[data-v-31b537a4] .el-select,.data-set-pop[data-v-31b537a4] .el-input{width:400px\n}\n.auth-pop[data-v-31b537a4] .el-dialog__body{padding:10px 20px 20px\n}\n.video-pop[data-v-31b537a4] .el-dialog__body{padding:10px 20px\n}\n",""])},qhPP:function(t,e,a){t.exports=a.p+"static/img/offline.5fb3a28.png"}});