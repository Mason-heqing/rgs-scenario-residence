webpackJsonp([16],{"+iDS":function(t,e,a){var i=a("vupf");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("6a27ad9c",i,!0)},at3I:function(t,e,a){"use strict";function i(t){a("+iDS")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("TtmE"),l=a("D7x1"),o={name:"home",data:function(){return{rules:{billName:[{required:!0,message:"请输入账单名称",trigger:"blur"}],houseId:[{required:!0,message:"请选择户室",trigger:"change"}]},addForm:{appId:"",houseName:"",houseId:"",billImage:"",billName:""},cascaderData:[],groupProps:{children:"groups",label:"name",value:"id",expandTrigger:"hover"},images:[],imgurl:"",uploadData:{appId:""},billTip:!1,isRequst:!1,fileList:[]}},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}},watch:{appId:function(t,e){this.appId=t,this.uploadData.appId=t,this.addForm.appId=t,this.getLeftData()}},filters:{},created:function(){this.imgurl=this.tools.global.API_URL},components:{MsgBox:s.a,TableCmp:l.a},mounted:function(){this.addForm.appId=this.appId,this.uploadData.appId=this.appId,this.getLeftData()},methods:{open:function(){var t=this,e=setTimeout(function(){t.popVisible=!1,clearTimeout(e)},3e3)},clearSetTimeOut:function(){clearTimeout(this.timer)},addBill1:function(t){var e=this;0!=this.images.length?this.addForm.billImage=this.images.join(","):this.addForm.billImage="",this.billTip=!1,this.$refs[t].validate(function(t){if(t&&0!=e.images.length)e.isRequst=!0,e.utils.http({url:"/property/bill/insert",method:"POST",data:e.addForm},function(t){e.isRequst=!1,200==t.code&&e.$router.push({path:"/propertybill"})});else if(!e.addForm.billImage)return void(e.billTip=!0)})},getLeftData:function(){var t=this;this.utils.http({url:"/base/house/list",method:"GET",params:{appId:this.appId}},function(e){200==e.code&&e.data&&(t.cascaderData=e.data.groups)})},cascaderChange:function(t){t&&(this.addForm.houseId=t[t.length-1])},beforeAvatarUpload:function(t){var e=["image/jpeg","image/jpg","image/png","image/bmp"],a=e.includes(t.type),i=t.size/1024/1024<5;return a?i?void 0:(this.$message.error("上传图片大小不能超过 5MB!"),!1):(this.$message.error("格式不支持"),!1)},successCheck:function(t,e,a){var i=this;console.log(a),200==t.code?this.images.length<5?t.data.forEach(function(t,e){i.images.push(t)}):this.utils.tip("warning","文件个数超出"):this.utils.tip("warning",t.msg),console.log(this.addForm.billImage)},exceed:function(){this.$message.error("附件个数不能超过5个")},handleRemove:function(t,e){var a=t.response.data[0],i=this.images.indexOf(a);this.images.splice(i,1)},remove:function(t){this.images.splice(t,1)},goBack:function(){this.$router.push({path:"/propertybill"})}}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{staticClass:"repairs-box"},[a("h3",[t._v("添加账单")]),t._v(" "),a("div",{staticClass:"repairs-msg"},[a("el-form",{ref:"addForm",staticClass:"mt-30 bill-form",staticStyle:{"padding-bottom":"30px"},attrs:{model:t.addForm,rules:t.rules}},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 control-label text-right",attrs:{for:"name"}},[a("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                    账单名称\n                  ")]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("el-form-item",{attrs:{prop:"billName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"输入账单名称最大支持20字",maxlength:"20"},model:{value:t.addForm.billName,callback:function(e){t.$set(t.addForm,"billName",e)},expression:"addForm.billName"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 control-label text-right",attrs:{for:"name"}},[a("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                    发送户室\n                  ")]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("el-form-item",{attrs:{prop:"houseId"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"楼栋/单元/房间",options:t.cascaderData,props:t.groupProps},on:{change:t.cascaderChange},model:{value:t.addForm.houseId,callback:function(e){t.$set(t.addForm,"houseId",e)},expression:"addForm.houseId"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 control-label text-right",attrs:{for:"name"}},[a("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n                    账单附件\n                  ")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("el-form-item",{attrs:{prop:"name"}},[a("div",{staticClass:"upload_box"},[a("el-upload",{attrs:{drag:"",limit:5,name:"file","show-file-list":!0,"file-list":t.fileList,action:t.imgurl+"/file/upload","list-type":"picture-card",data:t.uploadData,"on-success":t.successCheck,"on-remove":t.handleRemove,"before-upload":t.beforeAvatarUpload,"on-exceed":t.exceed}},[a("span",{staticStyle:{color:"#9E9DA2","font-size":"14px"}},[t._v("+添加图片")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持png，jpg，bmp，jpeg格式，大小不超过5M")]),t._v(" "),t.billTip?a("div",{staticClass:"el-upload__tip",staticStyle:{color:"#F56C6C"},attrs:{slot:"tip"},slot:"tip"},[t._v("请上传附件")]):t._e()])],1)])],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 control-label text-right"}),t._v(" "),a("div",{staticClass:"form-group col-sm-6 pb-40"},[t.isRequst?t._e():a("button",{staticClass:"btn btn-primary mr-20",attrs:{type:"button"},on:{click:function(e){t.addBill1("addForm")}}},[t._v("保存")]),t._v(" "),t.isRequst?a("button",{staticClass:"btn btn-primary mr-20",attrs:{type:"button"}},[t._v("保存中")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"btn-back"},on:{click:t.goBack}},[t._v("取消")])])])])],1)])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      物业服务 - 添加账单\n        ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n          ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-list-alt"}),t._v(" 物业服务\n        ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 添加账单\n        ")])])])}],d={render:r,staticRenderFns:n},c=d,p=a("VU/8"),m=i,h=p(o,c,!1,m,"data-v-2408dce7",null);e.default=h.exports},vupf:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.repairs-box h3[data-v-2408dce7]{border-left:5px solid #3c8dbc;padding-left:5px;line-height:20px;margin-bottom:20px;font-size:20px\n}\n.repairs-box .repairs-msg[data-v-2408dce7]{width:70%;padding-left:30px\n}\n.repairs-box .repairs-msg h4[data-v-2408dce7]{color:#000\n}\n.repairs-box .repairs-msg>p[data-v-2408dce7]{margin-bottom:0;line-height:24px\n}\n.repairs-box .repairs-msg .img-box img[data-v-2408dce7]{width:120px;height:120px\n}\n.repairs-box .repairs-msg[data-v-2408dce7] .el-textarea__inner{height:120px\n}\n.bill-form[data-v-2408dce7] .el-form-item__content{text-align:left\n}\n.bill-form[data-v-2408dce7] .el-range-editor.el-input__inner{width:60%\n}\n.bill-form[data-v-2408dce7] .el-input,.bill-form[data-v-2408dce7] .el-select{width:100%\n}\n.bill-form[data-v-2408dce7] .el-select>.el-input{width:100%\n}\n.bill-form[data-v-2408dce7] .el-dialog__footer{text-align:center\n}\n.bill-form[data-v-2408dce7] .el-form-item__content{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.content .upload_box[data-v-2408dce7] .el-upload{width:90px;height:40px;border-color:#ddd;border-radius:4px\n}\n.content .upload_box[data-v-2408dce7] .el-upload-dragger{width:88px;height:38px;line-height:38px\n}\n",""])}});