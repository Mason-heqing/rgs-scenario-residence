webpackJsonp([6],{Nhdk:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'\n[class^="el-icon-"][data-v-4962fee5],[class*=" el-icon-"][data-v-4962fee5]{margin:0 5px;color:#3c8dbc\n}\n.btn-group-box[data-v-4962fee5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.btn-group-box>div[data-v-4962fee5]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.all-group[data-v-4962fee5]{height:42px;line-height:42px;padding-left:20px;border:1px solid #ddd;border-bottom:0\n}\n@media (max-width: 1200px){\n.btn-group-box[data-v-4962fee5]{margin-top:15px\n}\n}\n.el-tab-pane[data-v-4962fee5]{padding-bottom:10px\n}\n.set-pop[data-v-4962fee5] .el-dialog__body{padding:0 20px\n}\n.set-pop[data-v-4962fee5] .icon-warning{color:#E6A23C;font-size:24px !important\n}\n.set-pop[data-v-4962fee5] .tip{color:red;display:block;margin:5px 0\n}\n.check-btn[data-v-4962fee5]{cursor:pointer\n}\n.upload-zip[data-v-4962fee5] .el-upload-list__item{width:60%\n}\n.upload-zip[data-v-4962fee5] .el-upload-list__item a{font-size:16px\n}\n.grant-box[data-v-4962fee5]{text-align:left;cursor:pointer\n}\n.grant-box>div[data-v-4962fee5]{height:6px;background:#00a65a;border-radius:3px\n}\n.grant-box>div.grant-color-s[data-v-4962fee5]{width:100%;background:#00a65a\n}\n.grant-box>div.grant-color-f[data-v-4962fee5]{width:0;background:#dd4b39\n}\n.grant-box>div.grant-color-half[data-v-4962fee5]{width:50%;background:#e6a23c\n}\n.grant-box>span[data-v-4962fee5]{padding:0px 6px;height:18px;display:inline-block;border-radius:10px;text-align:center;color:#fff;line-height:18px;font-size:12px\n}\n.grant-box>span.grant-num-s[data-v-4962fee5]{background:#00a65a\n}\n.grant-box>span.grant-num-f[data-v-4962fee5]{background:#dd4b39\n}\n.grant-box>span.grant-num-half[data-v-4962fee5]{background:#e6a23c\n}\n',""])},Qdrm:function(t,e,a){var s=a("UTLK");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("7aaafe7f",s,!0)},UTLK:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.tableX .el-table--scrollable-x .el-table__body-wrapper {\r\n  padding: 0 0 5px 0;\r\n  margin: 0 0 5px 0;\r\n  overflow-x: auto;\n}\r\n",""])},Y7nu:function(t,e,a){"use strict";function s(t){a("Qdrm")}function i(t){a("qz4K")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("TtmE"),l=a("D7x1"),n={props:{tableData:{type:Array,default:function(){return[]}},tableLabel:{type:Array,default:function(){return[]}},tableOption:{type:Object,default:function(){return{}}},isShowSelect:{type:Boolean,default:function(){return Boolean}}},data:function(){return{tabelHeader:[],selectData:[],imgurl:""}},components:{},mounted:function(){this.tabelHeader=$.extend(!0,[],this.tableLabel);for(var t=this.tabelHeader.length-1;t>=0;t--)this.tabelHeader[t].isshow||this.tabelHeader.splice(t,1);this.tabelHeader=this.tabelHeader},created:function(){this.imgurl=this.tools.global.API_URL},watch:{tableLabel:{handler:function(t){for(var e=$.extend(!0,[],t),a=e.length-1;a>=0;a--)e[a].isshow||e.splice(a,1);this.tabelHeader=e},deep:!0}},methods:{handleSelectionChange:function(t){console.log(t),this.selectData=t}}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"multipleTable",staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{"element-loading-text":"Loading",data:t.tableData,fit:!0,border:!0,"cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0,"default-sort":{prop:"date",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[t.isShowSelect?a("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._v(" "),t._l(t.tabelHeader,function(e,s){return[e.slot?t._t(e.slot):e.index?a("el-table-column",{attrs:{type:"index",width:"50",label:e.label,align:e.align}}):e.render?a("el-table-column",{key:s,attrs:{"min-width":e.width?e.width:"auto",align:e.align,label:e.label,prop:e.param,sortable:""},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(e.render(s.row)))])]}}])}):e.isimg?a("el-table-column",{key:s,attrs:{width:e.width?e.width:"auto",align:e.align,label:e.label,prop:e.param,sortable:""},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row[e.param]?a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.imgurl+"/file/download?path="+s.row[e.param],alt:""}}):t._e()]}}])}):e.isswitch?a("el-table-column",{key:s,attrs:{"min-width":e.width?e.width:"auto",align:e.align,label:e.label,prop:e.param,sortable:""},scopedSlots:t._u([{key:"default",fn:function(s){return[a("el-switch",{model:{value:s.row[e.param],callback:function(a){t.$set(s.row,e.param,a)},expression:"scope.row[item.param]"}})]}}])}):a("el-table-column",{key:s,attrs:{"min-width":e.width?e.width:"auto",align:e.align,label:e.label,prop:e.param,sortable:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e.render?a("span",[t._v("\n          "+t._s(e.render(s.row))+"\n        ")]):a("span",[t._v(t._s(s.row[e.param]))])]}}])})]})],2)},c=[],p={render:r,staticRenderFns:c},d=p,u=a("VU/8"),h=s,b=u(n,d,!1,h,null,null),m=b.exports,g=a("5Wmi"),f=a("pOg+"),v=a("18Ef"),_={name:"home",data:function(){return{msg:"通道规则",currentPage:1,currentPage1:1,popVisible:!1,popTitle:"这个是标题",popContent:"这个是内容",total:0,multipleSelection:[],tableData:[],tableLabel:[{label:"ID",param:"id",align:"center",isshow:!1,sortable:!0,width:"120"},{label:"序号",param:"img",align:"center",sortable:!0,isshow:!0,index:!0},{label:"人脸",param:"faceUrl",align:"center",sortable:!0,isimg:!0,isshow:!0,width:"120"},{label:"姓名",param:"personName",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"联系方式",param:"phone",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"IC卡",param:"icNum",align:"center",isshow:!0,sortable:!0,width:"100"},{slot:"operate1",isshow:!0,label:"住户类型"},{slot:"operate2",isshow:!0,label:"住宅信息"},{slot:"operate3",isshow:!0,label:"授权状态"},{slot:"operate",isshow:!0}],tableOption:[],tableSelect:[],activeName:"first",isShowSelect:!0,personType:[{value:"1",label:"户主"},{value:"2",label:"家庭成员"},{value:"3",label:"租客"},{value:"5",label:"其他"}],PersonListForm:{appId:"",pageNum:1,pageSize:10,personName:"",subtype:"",groupId:""},PersonListForm1:{appId:"",pageNum:1,pageSize:10,personName:"",subtype:"",time:"",bindStatus:""},total1:1,tableData1:[],tableLabel1:[{label:"ID",param:"id",align:"center",isshow:!1,sortable:!0,width:"120"},{label:"序号",param:"img",align:"center",sortable:!0,isshow:!0,index:!0},{label:"人脸",param:"faceUrl",align:"center",sortable:!0,isimg:!0,isshow:!0,width:"120"},{label:"姓名",param:"personName",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"联系方式",param:"phone",align:"center",isshow:!0,sortable:!0,width:"120"},{label:"住户类型",param:"personSubtype",align:"center",isshow:!0,width:"120",render:function(t){return 1===t.personSubtype?"户主":2==t.personSubtype?"家庭成员":3==t.personSubtype?"租客":5==t.personSubtype?"其他":void 0}},{label:"住宅信息",param:"houseAddress",align:"center",isshow:!0,sortable:!0,width:"150"},{label:"有效期限",param:"effectiveTime",align:"center",isshow:!0,sortable:!0,width:"180"},{slot:"operate1",isshow:!0,label:"附件"},{label:"申请时间",param:"applyTime",align:"center",isshow:!0,sortable:!0,width:"180"},{label:"审核状态",param:"bindStatus",align:"center",isshow:!0,width:"120",render:function(t){return 0==t.bindStatus?"待物业审核":1==t.bindStatus?"户主审核通过":2==t.bindStatus?"户主审核未通过":3==t.bindStatus?"物业审核通过":4==t.bindStatus?"物业审核未通过":5==t.bindStatus?"待户主审核":8==t.bindStatus?"已取消":9==t.bindStatus?"已绑定":void 0}},{slot:"operate",isshow:!0}],tableOption1:[],tableSelect1:[],loading:!1,cascaderData:[],groupProps:{children:"groups",label:"name",value:"id",checkStrictly:!0,expandTrigger:"hover"},bindStatus:[{value:"0",label:"待物业审核"},{value:"1",label:"户主审核通过"},{value:"2",label:"户主审核未通过"},{value:"3",label:"物业审核通过"},{value:"4",label:"物业审核未通过"},{value:"5",label:"待户主审核"},{value:"8",label:"已取消"},{value:"9",label:"已绑定"}],popIndex:1,checkPopVisible:!1,checkPopTitle:"审核",checkForm:{bindStatus:"",id:"",bindFailReseaon:""},checkMsg:"",showCheckTip:!1,outPop:!1,outChecked:!1,previewImg:[],showViewer:!1,imgurl:"",tabIndex:0,importPop:!1,fileList:[],uploadData:{appId:""},authPopVisible:!1,authPopTitle:"",authId:"",authName:"",isExport:!1,exportUrl:"",exportErrList:[],exporterrPop:!1,timer:null,elcascaderkey:1}},filters:{},created:function(){for(var t=0;t<this.tableLabel.length;t++)this.tableLabel[t].label&&this.tableOption.push(this.tableLabel[t].label),this.tableLabel[t].isshow&&this.tableSelect.push(this.tableLabel[t].label);for(var e=0;e<this.tableLabel1.length;e++)this.tableLabel1[e].label&&this.tableOption1.push(this.tableLabel1[e].label),this.tableLabel1[e].isshow&&this.tableSelect1.push(this.tableLabel1[e].label);this.imgurl=this.tools.global.API_URL,console.log(this.imgurl,"this.imgurl")},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}},watch:{appId:function(t,e){this.appId=t,++this.elcascaderkey,this.PersonListForm={appId:t,pageNum:1,pageSize:10,personName:"",subtype:"",groupId:""},this.PersonListForm1={appId:t,pageNum:1,pageSize:10,personName:"",subtype:"",time:"",bindStatus:""},this.uploadData.appId=t,this.getPersonList(),this.getCheckList(),this.getLeftData()}},components:{MsgBox:o.a,TableCmp:l.a,TableBmp:m,ElImageViewer:g.a,ExportBox:f.a,AuthBox:v.a},mounted:function(){this.exportUrl=this.imgurl+"/person/importPerson/",this.appId&&(this.PersonListForm.appId=this.appId,this.PersonListForm1.appId=this.appId,this.uploadData.appId=this.appId,this.getPersonList(),this.getCheckList(),this.getLeftData())},methods:{elCascaderOnlick:function(){var t=this;setTimeout(function(){document.querySelectorAll(".el-cascader-node__label").forEach(function(e){e.onclick=function(){this.previousElementSibling.click(),t.$refs.elcascader.dropDownVisible=!1}}),document.querySelectorAll(".el-cascader-panel .el-radio").forEach(function(e){e.onclick=function(){t.$refs.elcascader.dropDownVisible=!1}})},100)},checkboxChange:function(t){console.log(t);for(var e=0;e<this.tableLabel.length;e++)this.tableSelect.indexOf(this.tableLabel[e].label)>-1?this.tableLabel[e].isshow=!0:this.tableLabel[e].isshow=!1},checkboxChange1:function(t){for(var e=0;e<this.tableLabel1.length;e++)this.tableSelect1.indexOf(this.tableLabel1[e].label)>-1?this.tableLabel1[e].isshow=!0:this.tableLabel1[e].isshow=!1},getLeftData:function(){var t=this;this.cascaderData=[],this.utils.http({url:"/base/house/list",method:"GET",params:{appId:this.appId}},function(e){200==e.code&&e.data.groups&&(t.cascaderData=e.data.groups)})},getPersonList:function(){var t=this;this.loading=!0,this.utils.http({url:"/person/queryPersonByPage",method:"POST",data:this.PersonListForm},function(e){t.loading=!1,200==e.code&&(t.total=e.data.total,t.tableData=e.data.records,t.currentPage=e.data.current)})},getCheckList:function(){var t=this;this.utils.http({url:"/person/queryHouseholderByPage",method:"POST",data:this.PersonListForm1},function(e){200==e.code&&(t.total1=e.data.total,t.tableData1=e.data.records,t.currentPage1=e.data.current)})},cascaderChange:function(t){t&&(this.PersonListForm.groupId=t[t.length-1])},resetBtn:function(){this.PersonListForm={appId:this.appId,pageNum:1,pageSize:10,personName:"",subtype:"",groupId:""},this.getPersonList()},resetBtn1:function(){this.PersonListForm1={appId:this.appId,pageNum:1,pageSize:10,personName:"",subtype:"",time:"",bindStatus:""},this.getCheckList()},goEdit:function(t){this.utils.setStore("ownerMsg",t),this.$router.push({path:"/ownermanageadd",query:{type:"2"}})},deleteOwner:function(t){var e=this;this.$confirm("您确信删除选中的住户?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.utils.http({url:"/person/deleteHousehold",method:"GET",params:{appId:e.appId,personId:t}},function(t){200==t.code&&(e.utils.tip("success","删除成功"),e.getPersonList())})}).catch(function(){})},goCheck:function(t){this.checkMsg=t.personName+",申请"+t.houseAddress,this.checkPopVisible=!0,this.popIndex=1,this.checkForm.id=t.id},checkAgree:function(){this.checkForm.bindStatus=9,this.checkRequest()},clickRefuse:function(){this.popIndex=2,this.checkPopTitle="请输入拒绝原因"},cancelRefuse:function(){this.popIndex=1,this.checkPopTitle="审核",this.checkForm.bindFailReseaon="",this.showCheckTip=!1},refuse:function(){this.checkForm.bindStatus=4,this.checkForm.bindFailReseaon?this.checkRequest():this.showCheckTip=!0},checkRequest:function(){var t=this;this.utils.http({url:"/person/updateBindStatus",method:"POST",data:this.checkForm},function(e){200==e.code&&(t.checkPopVisible=!1,t.showCheckTip=!1,t.utils.tip("success","审核成功"),t.getCheckList())})},closePop:function(){this.popIndex=1,this.checkPopTitle="审核",this.checkForm.bindFailReseaon=""},open:function(){var t=this;this.timer=setTimeout(function(){t.popVisible=!1,clearTimeout(t.timer)},3e3)},clearSetTimeOut:function(){clearTimeout(this.timer)},batchDelete:function(){var t=this,e=[];this.$refs.tableChild.selectData.forEach(function(t,a){e.push(t.id)}),0==e.length?(this.popVisible=!0,this.popTitle="提示",this.popContent="请先选择要删除的住户",this.open()):this.$confirm("您确信删除选中的住户?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.utils.http({url:"/person/batchDeleteHousehold",method:"POST",data:{appId:t.appId,personIdList:e}},function(e){200==e.code&&(t.utils.tip("success","删除成功"),t.getPersonList())})}).catch(function(){})},goAdd:function(){this.$router.push({path:"/ownermanageadd",query:{type:"1"}})},exportBtn:function(){this.outPop=!0},outBtn:function(){var t=this;if(this.isExport=!0,0==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm.withPic=1:this.PersonListForm.withPic=0;var e=[];this.$refs.tableChild.selectData.forEach(function(t,a){e.push(t.id)}),this.PersonListForm.ids=e,this.utils.http({url:"/person/personExport",method:"POST",data:this.PersonListForm},function(e){t.isExport=!1,t.outPop=!1,delete t.PersonListForm.ids,200==e.code?t.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):t.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}else if(1==this.tabIndex){this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.PersonListForm1.withPic=1:this.PersonListForm1.withPic=0;var a=[],s=this.$refs.tableChild1.selectData;s.forEach(function(t,e){a.push(t.id)}),this.PersonListForm1.ids=a,this.utils.http({url:"/person/houseExport",method:"POST",data:this.PersonListForm1},function(e){t.isExport=!1,t.outPop=!1,delete t.PersonListForm1.ids,200==e.code?t.$alert("人员正在导出请稍后","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):t.$alert("人员导出失败","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})}},onPreview:function(t){var e=this;this.previewImg=[],t.split(",").forEach(function(t,a){var s=e.imgurl+"/file/download?path="+t;e.previewImg.push(s)}),this.showViewer=!0},closeViewer:function(){this.showViewer=!1},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},handleSizeChange:function(t){this.PersonListForm.pageSize=t,this.getPersonList()},handleCurrentChange:function(t){this.PersonListForm.pageNum=t,this.getPersonList()},handleSizeChange1:function(t){this.PersonListForm1.pageSize=t,this.getCheckList()},handleCurrentChange1:function(t){this.PersonListForm1.pageNum=t,this.getCheckList()},handleClick:function(t,e){0==t.index?this.tabIndex=0:1==t.index&&(this.tabIndex=1)},submitUpload:function(){this.fileList.length>0?this.$refs.upload.submit():this.$message.error("请选择文件")},selectChange:function(t,e){if(!["zip"].includes(t.name.substring(t.name.lastIndexOf(".")+1)))return this.$message.error("只支持.zip压缩文件"),this.fileList=[],!1;this.fileList=e},beforeAvatarUpload:function(t,e){var a=t.name.substring(t.name.lastIndexOf(".")+1),s=["zip"],i=s.includes(a),o=t.size/1024/1024<128;return i?o?(this.importPop=!1,this.popVisible=!0,this.popTitle="提示",void(this.popContent="人员正在导入请稍后")):(this.$message.error("文件大小不能超过 128MB!"),!1):(this.$message.error("只支持.zip压缩文件"),!1)},successCheck:function(t,e,a){console.log(t),this.$refs.upload.clearFiles(),this.popVisible=!1,200==t.code?1==t.data.isOpen?(this.exportErrList=t.data.list,this.exporterrPop=!0):0==t.data.isOpen?this.$alert("人员导入成功","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):2==t.data.isOpen&&this.$message.error("模板解析异常"):this.$message.error(t.msg)},removeFile:function(){this.fileList=[]},uploadErr:function(t,e,a){this.$message.error("导入失败")},remove:function(t){this.images.splice(t,1)},exceed:function(){this.$message.error("不支持多文件上传")},goView:function(t,e){this.authPopVisible=!0,this.authId=t,this.authPopTitle=e}}},w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-body"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部住户",name:"first"}},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"col-lg-2 pl-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"搜索姓名/手机号码"},model:{value:t.PersonListForm.personName,callback:function(e){t.$set(t.PersonListForm,"personName",e)},expression:"PersonListForm.personName"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-cascader",{key:t.elcascaderkey,ref:"elcascader",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"楼栋/单元/房间",options:t.cascaderData,props:t.groupProps},on:{"visible-change":t.elCascaderOnlick,"expand-change":t.elCascaderOnlick,change:t.cascaderChange},model:{value:t.PersonListForm.groupId,callback:function(e){t.$set(t.PersonListForm,"groupId",e)},expression:"PersonListForm.groupId"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"住户类型"},model:{value:t.PersonListForm.subtype,callback:function(e){t.$set(t.PersonListForm,"subtype",e)},expression:"PersonListForm.subtype"}},t._l(t.personType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),a("div",{staticClass:"col-lg-4  pr-0"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getPersonList}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:t.resetBtn}},[a("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v("重置\n                        ")])])])]),t._v(" "),a("div",{staticClass:" btn-group-box",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[a("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[a("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:t.goAdd}},[a("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),t._v("新增\n                      ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:t.batchDelete}},[a("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}}),t._v("批量删除\n                      ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:t.exportBtn}},[a("span",{staticClass:"glyphicon glyphicon-arrow-down",attrs:{"aria-hidden":"true"}}),t._v("导出\n                      ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:function(e){t.importPop=!0}}},[a("span",{staticClass:"glyphicon glyphicon-arrow-up",attrs:{"aria-hidden":"true"}}),t._v("批量导入\n                      ")])]),t._v(" "),a("div",{staticClass:" pr-0 text-right"},[a("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{on:{change:t.checkboxChange},model:{value:t.tableSelect,callback:function(e){t.tableSelect=e},expression:"tableSelect"}},t._l(t.tableOption,function(t){return a("div",{key:t,staticClass:"checkbox-div"},[a("el-checkbox",{key:t,attrs:{label:t}})],1)}))],1)],1)],1)]),t._v(" "),a("table-cmp",{ref:"tableChild",attrs:{"table-data":t.tableData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}},[a("el-table-column",{staticClass:"nice",attrs:{slot:"operate1",label:"住户类型",align:"center","min-width":"120",sortable:""},slot:"operate1",scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.houseNameList,function(e,s){return a("div",{key:s},[1==e.personSubtype?a("span",[t._v("户主")]):t._e(),t._v(" "),2==e.personSubtype?a("span",[t._v("家庭成员")]):t._e(),t._v(" "),3==e.personSubtype?a("span",[t._v("租客")]):t._e(),t._v(" "),5==e.personSubtype?a("span",[t._v("其他")]):t._e()])})}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate2",label:"住宅信息",align:"center","min-width":"120",sortable:""},slot:"operate2",scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.houseNameList,function(e,s){return a("div",{key:s},[a("span",[t._v(t._s(e.houseAddress))])])})}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate3",label:"授权状态",align:"center",width:"120",sortable:""},slot:"operate3",scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.row.grantTotalNum&&e.row.grantSuccessNum>=e.row.grantTotalNum?a("div",{staticClass:"grant-box",on:{click:function(a){t.goView(e.row.id,e.row.personName)}}},[a("div",{staticClass:"grant-color-s"}),t._v(" "),a("span",{staticClass:"grant-num-s"},[t._v(t._s(e.row.grantSuccessNum)+"/"+t._s(e.row.grantTotalNum))])]):t._e(),t._v(" "),0!=e.row.grantTotalNum&&0==e.row.grantSuccessNum?a("div",{staticClass:"grant-box",on:{click:function(a){t.goView(e.row.id,e.row.personName)}}},[a("div",{staticClass:"grant-color-f"}),t._v(" "),a("span",{staticClass:"grant-num-f"},[t._v(t._s(e.row.grantSuccessNum)+"/"+t._s(e.row.grantTotalNum))])]):t._e(),t._v(" "),0!=e.row.grantTotalNum&&e.row.grantSuccessNum<e.row.grantTotalNum&&0!=e.row.grantSuccessNum?a("div",{staticClass:"grant-box",on:{click:function(a){t.goView(e.row.id,e.row.personName)}}},[a("div",{staticClass:"grant-color-half"}),t._v(" "),a("span",{staticClass:"grant-num-half"},[t._v(t._s(e.row.grantSuccessNum)+"/"+t._s(e.row.grantTotalNum))])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"180"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{title:"编辑",type:"primary",icon:"el-icon-edit",round:"",size:"mini"},on:{click:function(a){t.goEdit(e.row)}}}),t._v(" "),a("el-button",{attrs:{title:"删除",type:"danger",icon:"el-icon-delete",round:"",size:"mini"},on:{click:function(a){t.deleteOwner(e.row.id)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"住户审核",name:"second"}},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"col-lg-2 pl-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"搜索姓名/手机号码"},model:{value:t.PersonListForm1.personName,callback:function(e){t.$set(t.PersonListForm1,"personName",e)},expression:"PersonListForm1.personName"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date",placeholder:"申请日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:t.PersonListForm1.time,callback:function(e){t.$set(t.PersonListForm1,"time",e)},expression:"PersonListForm1.time"}})],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"住户类型"},model:{value:t.PersonListForm1.subtype,callback:function(e){t.$set(t.PersonListForm1,"subtype",e)},expression:"PersonListForm1.subtype"}},t._l(t.personType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-md-12"},[a("el-select",{attrs:{clearable:"",placeholder:"状态"},model:{value:t.PersonListForm1.bindStatus,callback:function(e){t.$set(t.PersonListForm1,"bindStatus",e)},expression:"PersonListForm1.bindStatus"}},t._l(t.bindStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),a("div",{staticClass:"col-lg-3  pr-0"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getCheckList}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:t.resetBtn1}},[a("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v("重置\n                        ")])])])]),t._v(" "),a("div",{staticClass:" btn-group-box",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[a("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:t.exportBtn}},[a("span",{staticClass:"glyphicon glyphicon-arrow-down",attrs:{"aria-hidden":"true"}}),t._v("导出\n                      ")])]),t._v(" "),a("div",{staticClass:" pr-0 text-right"},[a("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{on:{change:t.checkboxChange1},model:{value:t.tableSelect1,callback:function(e){t.tableSelect1=e},expression:"tableSelect1"}},t._l(t.tableOption1,function(t){return a("div",{key:t,staticClass:"checkbox-div"},[a("el-checkbox",{key:t,attrs:{label:t}})],1)}))],1)],1)],1)]),t._v(" "),a("table-bmp",{ref:"tableChild1",attrs:{"table-data":t.tableData1,"table-label":t.tableLabel1,"is-show-select":t.isShowSelect}},[a("el-table-column",{attrs:{slot:"operate1",label:"附件",align:"center",width:"100"},slot:"operate1",scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enclosureUrl?a("span",{staticClass:"see-files",on:{click:function(a){t.onPreview(e.row.enclosureUrl)}}},[t._v("查看")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"100"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.bindStatus||1==e.row.bindStatus?a("el-row",[a("i",{staticClass:"el-icon-edit check-btn",on:{click:function(a){t.goCheck(e.row)}}},[t._v("审核")])]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total1},on:{"size-change":t.handleSizeChange1,"current-change":t.handleCurrentChange1}})],1)],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"批量导入",visible:t.importPop,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(e){t.importPop=e}}},[a("div",{staticStyle:{padding:"0px"}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[t._v("点击下载Excel模板")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("a",{attrs:{href:t.imgurl+"/static/excel/person.xls"}},[t._v("开始下载Excel导入模板.xls")]),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v("（Excel导入模板表头红色必填）")])])]),t._v(" "),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[t._v("选择.zip文件")]),t._v(" "),a("div",{staticClass:"col-sm-9 upload-zip"},[a("el-upload",{ref:"upload",attrs:{name:"file",limit:1,"with-credentials":!0,"file-list":t.fileList,action:t.exportUrl+t.appId,data:t.uploadData,"auto-upload":!1,"on-exceed":t.exceed,"on-change":t.selectChange,"on-error":t.uploadErr,"before-upload":t.beforeAvatarUpload,"on-success":t.successCheck,"on-remove":t.removeFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传")])],1)],1)]),t._v(" "),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col-sm-3 text-right"},[t._v("导入须知")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[t._v("\n                1、上传文件大小最大为："),a("span",{staticStyle:{color:"red"}},[t._v("128MB")]),t._v("；"),a("br"),t._v("\n                2、excel文件跟人员图片需要放在"),a("span",{staticStyle:{color:"red"}},[t._v("同一层级目录")]),t._v("，如图片放在(批量导入目录)则excel文件也要放在该目录下；"),a("br"),t._v("\n                3、目前仅支持上传"),a("span",{staticStyle:{color:"red"}},[t._v("zip格式")]),t._v("压缩文件，将文件夹压缩时请选择正确的压缩格式；"),a("span",{staticStyle:{color:"red"}},[t._v("excel模板请下载上方指定的模板")]),t._v("；"),a("br"),t._v("\n                4、人员与图片的对应方式为根据excel文件人脸图片进行获取，如果当前导入用户 存在人脸图片，请将图片名称填入此列;"),a("br"),t._v("\n                5、当人脸图片列为空时，会根据人员姓名去进行一次对应的图片获取，如人员姓名为李四，会去获取一次图片名称为李四的文件；"),a("br"),t._v("\n                6、若无excel文件，仅有图片，则人脸图片名称格式为："),a("span",{staticStyle:{color:"red"}},[t._v("姓名_人员编号")])])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.importPop=!1}}},[t._v("关闭")])],1)])],1),t._v(" "),t.showViewer?a("el-image-viewer",{attrs:{"on-close":t.closeViewer,"url-list":t.previewImg}}):t._e(),t._v(" "),a("el-dialog",{staticClass:"el-dialog-reset set-pop",attrs:{title:t.checkPopTitle,visible:t.checkPopVisible,width:"30%"},on:{"update:visible":function(e){t.checkPopVisible=e},close:t.closePop}},[a("div",{staticStyle:{padding:"0px"}},[1==t.popIndex?a("div",[a("h4",[a("span",{staticClass:"el-icon-warning icon-warning"}),t._v("是否同意申请")]),t._v(" "),a("p",{staticClass:"pl-30"},[t._v(t._s(t.checkMsg))])]):t._e(),t._v(" "),2==t.popIndex?a("div",[a("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":"",rows:"5",placeholder:"请输入拒绝原因"},model:{value:t.checkForm.bindFailReseaon,callback:function(e){t.$set(t.checkForm,"bindFailReseaon",e)},expression:"checkForm.bindFailReseaon"}}),t._v(" "),t.showCheckTip?a("span",{staticClass:"tip"},[t._v("请输入拒绝原因")]):t._e()],1):t._e()]),t._v(" "),1==t.popIndex?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.clickRefuse}},[t._v("拒绝")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.checkAgree}},[t._v("同意")])],1):t._e(),t._v(" "),2==t.popIndex?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelRefuse}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.refuse}},[t._v("确定")])],1):t._e()]),t._v(" "),a("export-box",{ref:"exportData",attrs:{exportPopVisible:t.outPop,isExport:t.isExport},on:{"update:exportPopVisible":function(e){t.outPop=e},"update:isExport":function(e){t.isExport=e}}}),t._v(" "),a("auth-box",{ref:"authData",attrs:{authPopVisible:t.authPopVisible,authPopTitle:t.authPopTitle},on:{"update:authPopVisible":function(e){t.authPopVisible=e}}}),t._v(" "),a("el-dialog",{staticClass:"el-dialog-reset",attrs:{title:"导入失败数据",visible:t.exporterrPop,width:"60%"},on:{"update:visible":function(e){t.exporterrPop=e}}},[a("div",{staticStyle:{padding:"0px"}},[a("el-table",{attrs:{data:t.exportErrList,"max-height":"250",border:!0,"cell-style":{background:"#fff",fontSize:"14px",color:"#12111D",padding:"6px 0"},stripe:!0}},[a("el-table-column",{attrs:{property:"personName",label:"姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{property:"phone",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"icNum",label:"IC卡",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"personSubtype",label:"住户类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.personSubtype?a("span",[t._v("户主")]):t._e(),t._v(" "),"2"==e.row.personSubtype?a("span",[t._v("家庭成员")]):t._e(),t._v(" "),"3"==e.row.personSubtype?a("span",[t._v("租客")]):t._e(),t._v(" "),"5"==e.row.personSubtype?a("span",[t._v("其他")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"buildName",label:"楼栋",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"unitName",label:"单元",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"houseName",label:"房号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"errorMsg",label:"失败原因","min-width":"120"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.exporterrPop=!1}}},[t._v("取 消")])],1)]),t._v(" "),a("msg-box",{attrs:{popVisible:t.popVisible,popTitle:t.popTitle,popContent:t.popContent},on:{"update:popVisible":function(e){t.popVisible=e}}})],1)},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      人员管理 - 住户管理\n        ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n          ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-user"}),t._v(" 人员管理\n        ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 住户管理\n        ")])])])}],y={render:w,staticRenderFns:x},k=y,C=a("VU/8"),S=i,P=C(_,k,!1,S,"data-v-4962fee5",null);e.default=P.exports},qz4K:function(t,e,a){var s=a("Nhdk");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("23c71f72",s,!0)}});