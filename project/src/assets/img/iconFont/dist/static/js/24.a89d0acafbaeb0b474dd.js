webpackJsonp([24],{ESbv:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.btn-group-box[data-v-4b4d71cf]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.btn-group-box>div[data-v-4b4d71cf]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n",""])},"Vwq+":function(t,e,a){var l=a("ESbv");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("rjj0")("8346f408",l,!0)},te0F:function(t,e,a){"use strict";function l(t){a("Vwq+")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("TtmE"),s=a("C8pC"),o=a("D7x1"),n={name:"home",data:function(){return{msg:"来访记录",currentPage:1,popVisible:!1,popTitle:"这个是标题",popContent:"这个是内容",total:0,timer:null,multipleSelection:[],data:[{label:"一级 1",children:[{label:"二级 1-1",children:[{label:"三级 1-1-1"}]}]},{label:"一级 2",children:[{label:"二级 2-1",children:[{label:"三级 2-1-1"}]},{label:"二级 2-2",children:[{label:"三级 2-2-1"}]}]},{label:"一级 3",children:[{label:"二级 3-1",children:[{label:"三级 3-1-1"}]},{label:"二级 3-2",children:[{label:"三级 3-2-1"}]}]}],defaultProps:{children:"userTrees",label:"userName"},tableLabel:[{label:"名称",param:"name",align:"center",sortable:!0,isshow:!0,width:"100"},{label:"所在省份",param:"prov",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"所在城市",param:"city",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"所在区",param:"area",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"详细地址",param:"address",align:"center",sortable:!0,isshow:!0,width:"120"},{label:"ID",param:"id",align:"center",isshow:!1,sortable:!0,width:"280"},{slot:"operate",isshow:!0}],tableOption:[],tableSelect:[],leftData:[],listData:[],listDataForm:{userId:"",name:"",page:"1",pageSize:"10"},isShowSelect:!0,loading:!1,imgurl:""}},watch:{colOptions:function(t){var e=this,a=this.colSelect.filter(function(e){return t.indexOf(e)<0});this.colData.filter(function(t){-1!=a.indexOf(t.title)?(t.istrue=!1,e.$nextTick(function(){e.$refs.multipleTable.doLayout()})):(t.istrue=!0,e.$nextTick(function(){e.$refs.multipleTable.doLayout()}))})}},filters:{},created:function(){for(var t=0;t<this.tableLabel.length;t++)this.tableLabel[t].label&&this.tableOption.push(this.tableLabel[t].label),this.tableLabel[t].isshow&&this.tableSelect.push(this.tableLabel[t].label);this.imgurl=this.tools.global.API_URL},components:{MsgBox:i.a,FromDialog:s.a,TableCmp:o.a},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}},mounted:function(){this.getLeftData(),this.getListData()},methods:{getListData:function(){var t=this;this.utils.http({url:"/app/user/page",method:"GET",params:this.listDataForm},function(e){200==e.code&&(t.total=e.data.total,t.listData=e.data.records,t.currentPage=e.data.current)})},getLeftData:function(){var t=this;this.loading=!0,this.leftData=[],this.utils.http({url:"/app/user/userTree",method:"GET",params:{}},function(e){t.loading=!1,200==e.code&&(t.leftData.push(e.data),console.log(t.leftData))})},checkboxChange:function(t){console.log(this.tableSelect);for(var e=0;e<this.tableLabel.length;e++)this.tableSelect.indexOf(this.tableLabel[e].label)>-1?this.tableLabel[e].isshow=!0:this.tableLabel[e].isshow=!1;console.log(this.tableLabel)},open:function(){var t=this;this.timer=setTimeout(function(){t.popVisible=!1,clearTimeout(t.timer)},2e3)},clearSetTimeOut:function(){clearTimeout(this.timer)},handleNodeClick:function(t){this.listDataForm.userId=t.id,this.getListData()},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},handleSizeChange:function(t){this.listDataForm.pageSize=t,this.getListData()},handleCurrentChange:function(t){this.listDataForm.page=t,this.getListData()},goAdd:function(){this.$router.push({path:"/projectmanageadd",query:{type:"1"}})},goEdit:function(t){this.utils.setStore("thisData",t),this.$router.push({path:"/projectmanageadd",query:{type:"2"}})},allDeleteData:function(){var t=this,e=this.$refs.tableChild.selectData;console.log(e);var a=[];e.forEach(function(t,e){a.push(t.id)}),0==a.length?(this.popVisible=!0,this.popTitle="提示",this.popContent="请先选择要删除的记录",this.open()):this.$confirm("您确信删除选中的"+a.length+"条记录?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteRequst(a)}).catch(function(){})},deleteData:function(t){var e=this,a=[t];this.$confirm("您确信删除当前记录?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteRequst(a)}).catch(function(){})},deleteRequst:function(t){var e=this;this.utils.http({url:"/app/user/delete",method:"POST",data:{appId:t}},function(t){200==t.code&&(e.utils.tip("success","删除成功"),e.$router.go(0))})},getErcodeUrl:function(){var t=this;this.utils.http({url:"/app/user/qrCodeImgUrl",method:"GET",params:{}},function(e){if(t.loading=!1,200==e.code){var a=e.data,l=new XMLHttpRequest;l.open("GET",a,!0),l.responseType="blob",l.onload=function(t){var e=window.URL.createObjectURL(l.response),a=document.createElement("a");a.href=e,a.download="qrcode",a.click()},l.send()}})},downErcode:function(){this.getErcodeUrl()}}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid tree-color"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"panel-body",staticStyle:{padding:"0px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3 model-one"},[a("div",{staticClass:"box box-primary"},[t._m(1),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticStyle:{width:"100%","overflow-x":"auto","overflow-y":"auto","max-height":"668px"}},[a("el-tree",{attrs:{data:t.leftData,props:t.defaultProps,"default-expand-all":!0,"highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":t.handleNodeClick}})],1)])])])])]),t._v(" "),a("div",{staticClass:"col-lg-9 model-two"},[a("div",{staticClass:"box box-primary"},[a("div",{staticClass:"box-body"},[a("div",{staticClass:"btn-group btn-group-box",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[a("div",{staticClass:"btn-group col-lg-5 pl-0"},[a("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:t.goAdd}},[a("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),t._v("新增\n                  ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:t.allDeleteData}},[a("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}}),t._v("删除\n                  ")]),t._v(" "),a("a",{attrs:{href:t.imgurl+"/app/user/qrCodeImgUrl"}},[t._m(2)])]),t._v(" "),a("div",{staticClass:"col-lg-7 pr-0 text-right"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入名称查询",clearable:"",size:"small"},model:{value:t.listDataForm.name,callback:function(e){t.$set(t.listDataForm,"name",e)},expression:"listDataForm.name"}}),t._v(" "),a("el-button",{staticClass:"mr-10",attrs:{type:"primary",size:"small"},on:{click:t.getListData}},[t._v("搜索")]),t._v(" "),a("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,placement:"bottom-start"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{on:{change:t.checkboxChange},model:{value:t.tableSelect,callback:function(e){t.tableSelect=e},expression:"tableSelect"}},t._l(t.tableOption,function(t){return a("div",{key:t,staticClass:"checkbox-div"},[a("el-checkbox",{key:t,attrs:{label:t}})],1)}))],1)],1)],1)]),t._v(" "),a("table-cmp",{ref:"tableChild",attrs:{"table-data":t.listData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}},[a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"150"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{title:"编辑",type:"primary",icon:"el-icon-edit",round:"",size:"mini"},on:{click:function(a){t.goEdit(e.row)}}}),t._v(" "),a("el-button",{attrs:{title:"删除",type:"danger",icon:"el-icon-delete",round:"",size:"mini"},on:{click:function(a){t.deleteData(e.row.id)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])])])]),t._v(" "),a("msg-box",{attrs:{popVisible:t.popVisible,popTitle:t.popTitle,popContent:t.popContent},on:{"update:popVisible":function(e){t.popVisible=e}}})],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      我的项目 - 项目管理\n      ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n        ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-folder-open"}),t._v("  我的项目\n      ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 项目管理\n      ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-header with-border"},[a("h3",{staticClass:"box-title",staticStyle:{"font-weight":"bold"}},[t._v("子用户")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"}},[a("span",{staticClass:"glyphicon glyphicon-arrow-down",attrs:{"aria-hidden":"true"}}),t._v("下载二维码\n                    ")])}],d={render:r,staticRenderFns:c},p=d,h=a("VU/8"),u=l,b=h(n,p,!1,u,"data-v-4b4d71cf",null);e.default=b.exports}});