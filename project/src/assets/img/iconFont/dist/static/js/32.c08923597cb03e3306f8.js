webpackJsonp([32],{"9sPo":function(t,e,a){var o=a("hn8x");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("764ca1ae",o,!0)},Vvt2:function(t,e,a){"use strict";function o(t){a("9sPo")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("TtmE"),i=a("D7x1"),s=a("pOg+"),l={name:"home",data:function(){return{msg:"通道规则",currentPage:1,popVisible:!0,popTitle:"这个是标题",popContent:"这个是内容",total:0,multipleSelection:[],tableData:[],tableLabel:[{slot:"operate1",isshow:!0,label:"抓拍照片"},{slot:"operate2",isshow:!0,label:"对比照片"},{label:"姓名",param:"personName",align:"center",sortable:!0,isshow:!0},{label:"人员类型",param:"personType",align:"center",isshow:!0,width:"120",sortable:!0,render:function(t){if(1==t.personType){if(1==t.subType)return"住户人员";if(2==t.subType)return"物业员工";if(3==t.subType)return"系统管理员"}else{if(2==t.personType)return"黑名单";if(3==t.personType)return"访客";if(4==t.personType)return"陌生人"}}},{label:"识别方式",param:"passMode",align:"center",sortable:!0,width:"120",isshow:!0,render:function(t){return 0==t.passMode?"刷脸开门":2==t.passMode?"刷卡开门":7==t.passMode?"密码开门":8==t.passMode?"扫码开门":9==t.passMode?"远程开门":10==t.passMode?"车辆通过":void 0}},{label:"是否开门",param:"matched",align:"center",isshow:!0,width:"120",sortable:!0,render:function(t){return t.matched?"是":t.matched?void 0:"否"}},{label:"识别设备",param:"deviceName",align:"center",isshow:!0,width:"120",sortable:!0},{label:"车牌号码",param:"voucherNo",align:"center",isshow:!0,width:"120",sortable:!0},{label:"日期",param:"snapTime",align:"center",sortable:!0,isshow:!0,width:"150"}],isOpenDoor:[{value:!0,label:"是"},{value:!1,label:"否"}],recognizeWay:[{value:"0",label:"刷脸开门"},{value:"2",label:"刷卡开门"},{value:"7",label:"密码开门"},{value:"8",label:"扫码开门"},{value:"9",label:"远程开门"}],deviceGroup:[],value:"",timeArr:[],isShowSelect:!0,dataForm:{appId:"",identificationWay:"",name:"",deviceId:"",whetherToOpenTheDoor:null,startTime:"",endTime:"",pageNum:1,pageSize:10},deviceForm:{appId:"",page:1,pageSize:1e3},outChecked:!1,outPop:!1,loading:!1,isExport:!1,contentMsg:{},recordContentPop:!1,imgurl:""}},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}},watch:{appId:function(t,e){this.appId=t,this.dataForm={appId:t,identificationWay:"",name:"",deviceId:"",whetherToOpenTheDoor:null,startTime:"",endTime:"",pageNum:1,pageSize:10},this.deviceForm.appId=t,this.getDevice(),this.getToDayTime()}},filters:{},created:function(){this.imgurl=this.tools.global.API_URL},components:{MsgBox:n.a,TableCmp:i.a,ExportBox:s.a},mounted:function(){this.appId&&(this.deviceForm.appId=this.appId,this.dataForm.appId=this.appId,this.getDevice(),this.getToDayTime())},methods:{getToDayTime:function(){var t=new Date,e=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",n=e+a+o;this.timeArr=[n+"00:00:00",n+"23:59:59"],this.dataForm.startTime=this.timeArr[0],this.dataForm.endTime=this.timeArr[1],this.getTableData()},getDevice:function(){var t=this;this.utils.http({url:"/device/page",method:"POST",data:this.deviceForm},function(e){200==e.code&&(t.deviceGroup=e.data.records)})},getTableData:function(){var t=this;this.loading=!0,this.utils.http({url:"/record/identification/page",method:"POST",data:this.dataForm},function(e){t.loading=!1,200==e.code&&(t.total=e.data.total,t.tableData=e.data.records,t.currentPage=e.data.current)})},resetBtn:function(){this.dataForm={appId:this.appId,identificationWay:"",name:"",deviceId:"",whetherToOpenTheDoor:null,startTime:"",endTime:"",pageNum:1,pageSize:10},this.getToDayTime()},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},handleSizeChange:function(t){this.dataForm.pageSize=t,this.getTableData()},handleCurrentChange:function(t){this.dataForm.pageNum=t,this.getTableData()},changeTime:function(t){null!==this.timeArr&&this.timeArr.length>0?(this.dataForm.startTime=this.timeArr[0],this.dataForm.endTime=this.timeArr[1]):(this.dataForm.startTime="",this.dataForm.endTime="")},exportBtn:function(){this.outPop=!0},outBtn:function(){var t=this;this.isExport=!0,this.outChecked=this.$refs.exportData.outChecked,this.outChecked?this.dataForm.withPic=1:this.dataForm.withPic=0;var e=[];this.$refs.tableChild.selectData.forEach(function(t,a){e.push(t.id)}),this.dataForm.ids=e,this.utils.http({url:"/record/identification/export",method:"POST",data:this.dataForm},function(e){t.isExport=!1,t.outPop=!1,delete t.dataForm.ids,200==e.code?t.$alert("记录正在导出请稍后","提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"success"}).then(function(){}).catch(function(){}):t.$alert("记录导出失败","提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,type:"error"}).then(function(){}).catch(function(){})})},seeContent:function(t){this.contentMsg=t,this.recordContentPop=!0}}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-body"},[a("el-row",{staticStyle:{display:"block"},attrs:{gutter:10}},[a("el-col",{staticClass:"mb-15",attrs:{lg:3,xl:3}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"搜索姓名"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-col",{staticClass:"mb-15",attrs:{lg:6,xl:6}},[a("el-date-picker",{attrs:{clearable:"",small:"small",align:"right",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},on:{change:t.changeTime},model:{value:t.timeArr,callback:function(e){t.timeArr=e},expression:"timeArr"}})],1),t._v(" "),a("el-col",{staticClass:"mb-15",attrs:{lg:4,xl:4}},[a("el-select",{attrs:{clearable:"",placeholder:"识别方式"},model:{value:t.dataForm.identificationWay,callback:function(e){t.$set(t.dataForm,"identificationWay",e)},expression:"dataForm.identificationWay"}},t._l(t.recognizeWay,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{staticClass:"mb-15",attrs:{lg:3,xl:3}},[a("el-select",{attrs:{clearable:"",placeholder:"是否开门"},model:{value:t.dataForm.whetherToOpenTheDoor,callback:function(e){t.$set(t.dataForm,"whetherToOpenTheDoor",e)},expression:"dataForm.whetherToOpenTheDoor"}},t._l(t.isOpenDoor,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{staticClass:"mb-15",attrs:{lg:4,xl:4}},[a("el-select",{attrs:{clearable:"",placeholder:"识别设备"},model:{value:t.dataForm.deviceId,callback:function(e){t.$set(t.dataForm,"deviceId",e)},expression:"dataForm.deviceId"}},t._l(t.deviceGroup,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-col",{attrs:{lg:4,xl:4}},[a("div",{staticClass:" btn-group pl-0"},[a("button",{staticClass:"btn btn-primary pl-8 pr-8",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getTableData}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-default pl-8 pr-8",attrs:{id:"btn_device_reset",type:"button"},on:{click:t.resetBtn}},[a("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v("重置\n                        ")])])])],1),t._v(" "),a("div",{staticClass:" btn-group-box",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[a("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:t.exportBtn}},[a("span",{staticClass:"glyphicon glyphicon-arrow-down",attrs:{"aria-hidden":"true"}}),t._v("导出\n                      ")])])]),t._v(" "),a("table-cmp",{ref:"tableChild",attrs:{"table-data":t.tableData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}},[a("el-table-column",{attrs:{slot:"operate1",label:"抓拍照片",align:"center",width:"120"},slot:"operate1",scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.snapPic?a("img",{staticStyle:{cursor:"pointer",width:"80px",height:"80px",display:"inline-block"},attrs:{src:t.imgurl+"/file/download?path="+e.row.snapPic,alt:""},on:{click:function(a){t.seeContent(e.row)}}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{slot:"operate1",label:"对比照片",align:"center",width:"120"},slot:"operate1",scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.comparePic?a("img",{staticStyle:{cursor:"pointer",width:"80px",height:"80px",display:"inline-block"},attrs:{src:t.imgurl+"/file/download?path="+e.row.comparePic,alt:""},on:{click:function(a){t.seeContent(e.row)}}}):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])]),t._v(" "),a("export-box",{ref:"exportData",attrs:{exportPopVisible:t.outPop,isExport:t.isExport},on:{"update:exportPopVisible":function(e){t.outPop=e},"update:isExport":function(e){t.isExport=e}}}),t._v(" "),a("el-dialog",{staticClass:"el-dialog-reset",attrs:{title:"用户详情",visible:t.recordContentPop,width:"50%"},on:{"update:visible":function(e){t.recordContentPop=e}}},[a("div",{staticClass:"record-pop",staticStyle:{padding:"0px"}},[a("div",{staticClass:"record-pop-left"},[a("p",[a("span",[t._v("姓名：")]),t._v(t._s(t.contentMsg.personName))]),t._v(" "),a("p",[a("span",[t._v("性别：")]),t._v(" "),1==t.contentMsg.gender?a("label",[t._v("男")]):2==t.contentMsg.gender?a("label",[t._v("女")]):3==t.contentMsg.gender?a("label",[t._v("未知")]):t._e()]),t._v(" "),a("p",[a("span",[t._v("生日：")]),t._v(t._s(t.contentMsg.birthday))]),t._v(" "),a("p",[a("span",[t._v("住址：")]),t._v(t._s(t.contentMsg.address))]),t._v(" "),a("p",[a("span",[t._v("人员类型：")]),t._v(" "),1==t.contentMsg.personName?a("label",[t._v("白名单")]):2==t.contentMsg.personName?a("label",[t._v("黑名单")]):3==t.contentMsg.personName?a("label",[t._v("访客")]):4==t.contentMsg.personName?a("label",[t._v("陌生人")]):t._e()]),t._v(" "),a("p",[a("span",[t._v("人员编号：")]),t._v(t._s(t.contentMsg.code))]),t._v(" "),a("p",[a("span",[t._v("证件号：")]),t._v(t._s(t.contentMsg.idNum))]),t._v(" "),a("p",[a("span",[t._v("IC卡号：")]),t._v(t._s(t.contentMsg.icNum))]),t._v(" "),a("p",[a("span",[t._v("民族：")]),t._v(t._s(t.contentMsg.ethnic))]),t._v(" "),a("p",[a("span",[t._v("签发机关：")]),t._v(t._s(t.contentMsg.idIssuingOrgan))]),t._v(" "),a("p",[a("span",[t._v("设备类型：")]),t._v(" "),1==t.contentMsg.personName?a("label",[t._v("未知")]):2==t.contentMsg.personName?a("label",[t._v("人脸识别")]):3==t.contentMsg.personName?a("label",[t._v("认证对比")]):t._e()]),t._v(" "),a("p",[a("span",[t._v("抓拍设备：")]),t._v(t._s(t.contentMsg.deviceName))]),t._v(" "),a("p",[a("span",[t._v("抓拍时间：")]),t._v(t._s(t.contentMsg.snapTime))]),t._v(" "),a("p",[a("span",[t._v("对比结果：")]),t._v(" "),t.contentMsg.matched?a("label",{staticStyle:{color:"#00a65a"}},[t._v("匹配成功")]):a("label",{staticStyle:{color:"#dd4b39"}},[t._v("未匹配")])]),t._v(" "),a("p",[a("span",[t._v("相似度：")]),t._v(t._s(t.contentMsg.score))])]),t._v(" "),a("div",{staticClass:"record-pop-right"},[a("p",[a("span",[t._v("对比图片：")]),t._v(" "),a("el-image",{staticStyle:{width:"120px"},attrs:{src:t.imgurl+"/file/download?path="+t.contentMsg.comparePic,"preview-src-list":[t.imgurl+"/file/download?path="+t.contentMsg.comparePic]}})],1),t._v(" "),a("p",[a("span",[t._v("抓拍图片：")]),t._v(" "),a("el-image",{staticStyle:{width:"120px"},attrs:{src:t.imgurl+"/file/download?path="+t.contentMsg.snapPic,"preview-src-list":[t.imgurl+"/file/download?path="+t.contentMsg.snapPic]}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.recordContentPop=!1}}},[t._v("取 消")])],1)])],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      历史记录 - 识别记录\n        ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n          ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-time"}),t._v(" 历史记录\n        ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 识别记录\n        ")])])])}],p={render:r,staticRenderFns:c},d=p,h=a("VU/8"),u=o,v=h(l,d,!1,u,"data-v-250267ad",null);e.default=v.exports},hn8x:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.form-horizontal[data-v-250267ad] .el-range-editor.el-input__inner{width:100%\n}\n.form-horizontal[data-v-250267ad] .content .el-input__icon{line-height:26px\n}\n.form-horizontal[data-v-250267ad] .el-date-editor .el-range-separator{line-height:26px\n}\n.record-pop[data-v-250267ad]{overflow:hidden\n}\n.record-pop .record-pop-left[data-v-250267ad],.record-pop .record-pop-right[data-v-250267ad]{width:50%;float:left\n}\n.record-pop p span[data-v-250267ad]{width:80px;display:inline-block;text-align:right;color:#222;font-weight:600\n}\n.record-pop .record-pop-right>p[data-v-250267ad]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n",""])}});