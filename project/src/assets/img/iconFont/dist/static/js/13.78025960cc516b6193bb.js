webpackJsonp([13],{J2Rz:function(t,e,a){"use strict";function i(t){a("ntk0")}Object.defineProperty(e,"__esModule",{value:!0});var s,o=a("bOdI"),n=a.n(o),l=a("mvHQ"),c=a.n(l),r=a("TtmE"),d=a("D7x1"),p=(s={name:"home",data:function(){return{currentPage:1,popVisible:!1,popTitle:"这个是标题",popContent:"这个是内容",total:0,multipleSelection:[],tableData:[],tableLabel:[{label:"机构名称",param:"section",align:"center",sortable:!0,isshow:!0},{label:"联系方式",param:"phone",align:"center",isshow:!0,sortable:!0},{slot:"operate",isshow:!0}],addPopVisible:!1,addForm:{appId:"",section:"",phone:""},rules:{section:[{required:!0,message:"请输入机构名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号或电话号码",trigger:"blur"}]},isShowSelect:!0,tableForm:{appId:"",pageNum:1,pageSize:10,search:""},loading:!1,addType:"",timer:null,isRequest:!1}},watch:{},filters:{},created:function(){},components:{MsgBox:r.a,TableCmp:d.a},computed:{appId:{get:function(){return this.$store.state.project.projectId},set:function(t){this.$store.commit("changeProjectId",t)}}}},n()(s,"watch",{appId:function(t,e){this.appId=t,this.tableForm={appId:t,pageNum:1,pageSize:10,search:""},this.addForm.appId=t,this.getDataList()}}),n()(s,"mounted",function(){this.appId&&(this.tableForm.appId=this.appId,this.addForm.appId=this.appId,this.getDataList())}),n()(s,"methods",{consoleSelect:function(){console.log(this.$refs.tableChild.selectData)},open:function(){var t=this;this.timer=setTimeout(function(){t.popVisible=!1,clearTimeout(t.timer)},3e3)},clearSetTimeOut:function(){clearTimeout(this.timer)},getDataList:function(){var t=this;this.loading=!0,this.utils.http({url:"/property/contact/page",method:"POST",data:this.tableForm},function(e){t.loading=!1,t.total=e.data.total,t.tableData=e.data.records,t.currentPage=e.data.current})},addContact:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isRequest=!0,1==e.addType?e.editRequest():e.utils.http({url:"/property/contact/add",method:"POST",data:e.addForm},function(t){e.isRequest=!1,console.log(t),e.getDataList(),e.addPopVisible=!1,e.addForm.section="",e.addForm.phone=""}))})},resetBtn:function(){this.tableForm={appId:this.appId,pageNum:1,pageSize:10,search:""},this.getDataList()},editContact:function(t){this.addType=1,this.addPopVisible=!0,this.addForm=JSON.parse(c()(t))},closePop:function(){var t=this;this.$nextTick(function(){t.$refs.addForm.clearValidate()}),this.addType="",this.addForm={appId:this.appId,section:"",phone:""}},editRequest:function(){var t=this;this.utils.http({url:"/property/contact/update",method:"POST",data:this.addForm},function(e){t.isRequest=!1,t.getDataList(),t.addPopVisible=!1,t.addType="",t.addForm={appId:t.appId,section:"",phone:""}})},deleteContact:function(t){var e=this,a=[];if(t)a.push(t);else{console.log(this.$refs.tableChild.selectData);this.$refs.tableChild.selectData.forEach(function(t,e){a.push(t.id)}),console.log(a.length)}0==a.length?(this.popVisible=!0,this.popTitle="提示",this.popContent="请先选择要删除的联系方式",this.open()):this.$confirm("您确信删除选中的员工?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.utils.http({url:"/property/contact/del",method:"POST",data:{ids:a}},function(t){e.utils.tip("success","删除成功"),e.getDataList()})}).catch(function(){})},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},handleSizeChange:function(t){this.tableForm.pageSize=t,this.getDataList()},handleCurrentChange:function(t){this.tableForm.pageNum=t,this.getDataList()}}),s),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("section",{staticClass:"content container-fluid"},[a("div",{staticClass:"box box-primary"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-body"},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"col-md-3 pl-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-sm-12"},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"搜索机构名称/联系方式"},model:{value:t.tableForm.search,callback:function(e){t.$set(t.tableForm,"search",e)},expression:"tableForm.search"}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-4  pr-0"},[a("div",{staticClass:"col-sm-12 btn-group mb-10"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"btn_device_search",type:"button"},on:{click:t.getDataList}},[a("span",{staticClass:"glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}}),t._v("查询\n                        ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_device_reset",type:"button"},on:{click:t.resetBtn}},[a("span",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v("重置\n                        ")])])]),t._v(" "),a("div",{staticClass:"btn-group",staticStyle:{width:"100%"},attrs:{id:"toolbar"}},[a("div",{staticClass:"btn-group col-lg-5 pl-0",attrs:{"data-toggle":"buttons"}},[a("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:function(e){t.addPopVisible=!0}}},[a("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),t._v("新增\n                      ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{id:"btn_delete",type:"button"},on:{click:function(e){t.deleteContact("")}}},[a("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}}),t._v("批量删除\n                      ")])])])]),t._v(" "),a("table-cmp",{ref:"tableChild",attrs:{"table-data":t.tableData,"table-label":t.tableLabel,"is-show-select":t.isShowSelect}},[a("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",width:"200"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{title:"编辑",type:"primary",icon:"el-icon-edit",round:"",size:"mini"},on:{click:function(a){t.editContact(e.row)}}}),t._v(" "),a("el-button",{attrs:{title:"删除",type:"danger",icon:"el-icon-delete",round:"",size:"mini"},on:{click:function(a){t.deleteContact(e.row.id)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block mt-10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])]),t._v(" "),a("el-dialog",{staticClass:"el-dialog-reset set-pop",attrs:{title:"添加联系方式",visible:t.addPopVisible,width:"40%"},on:{"update:visible":function(e){t.addPopVisible=e},close:t.closePop}},[a("div",{staticStyle:{padding:"0px"}},[a("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:t.addForm,rules:t.rules}},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[a("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n              机构名称\n            ")]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("el-form-item",{attrs:{prop:"section"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入机构名称最大支持20字",maxlength:"20"},model:{value:t.addForm.section,callback:function(e){t.$set(t.addForm,"section",e)},expression:"addForm.section"}})],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"name"}},[a("span",{staticStyle:{color:"red","line-height":"40px"}},[t._v("*")]),t._v("\n              联系方式\n            ")]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"支持输入手机号或电话号码"},model:{value:t.addForm.phone,callback:function(e){t.$set(t.addForm,"phone",e)},expression:"addForm.phone"}})],1)],1)])])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addPopVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isRequest,expression:"!isRequest"}],attrs:{type:"primary"},on:{click:function(e){t.addContact("addForm")}}},[t._v("确 定")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isRequest,expression:"isRequest"}],attrs:{type:"primary"}},[t._v("添加中")])],1)]),t._v(" "),a("msg-box",{attrs:{popVisible:t.popVisible,popTitle:t.popTitle,popContent:t.popContent},on:{"update:popVisible":function(e){t.popVisible=e}}})],1)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content-header"},[a("h1",{staticClass:"nice"},[t._v("\n      物业服务 - 联系方式\n        ")]),t._v(" "),a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"glyphicon glyphicon-home"}),t._v(" 首页\n          ")])]),t._v(" "),a("li",[a("i",{staticClass:"glyphicon glyphicon-list-alt"}),t._v(" 物业服务\n        ")]),t._v(" "),a("li",{staticClass:"active"},[a("i",{staticClass:"glyphicon glyphicon-adjust"}),t._v(" 联系方式\n        ")])])])}],m={render:u,staticRenderFns:h},b=m,g=a("VU/8"),f=i,v=g(p,b,!1,f,"data-v-ec2ccb2a",null);e.default=v.exports},VhbG:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"",""])},ntk0:function(t,e,a){var i=a("VhbG");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("6ceeccba",i,!0)}});